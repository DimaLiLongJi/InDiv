parcelRequire=function(e,r,n,t){function i(n,t){function o(e){return i(o.resolve(e))}function c(r){return e[n][1][r]||r}if(!r[n]){if(!e[n]){var l="function"==typeof parcelRequire&&parcelRequire;if(!t&&l)return l(n,!0);if(u)return u(n,!0);if(f&&"string"==typeof n)return f(n);var p=new Error("Cannot find module '"+n+"'");throw p.code="MODULE_NOT_FOUND",p}o.resolve=c;var a=r[n]=new i.Module(n);e[n][0].call(a.exports,o,a,a.exports,this)}return r[n].exports}function o(e){this.id=e,this.bundle=i,this.exports={}}var u="function"==typeof parcelRequire&&parcelRequire,f="function"==typeof require&&require;i.isParcelRequire=!0,i.Module=o,i.modules=e,i.cache=r,i.parent=u;for(var c=0;c<n.length;c++)i(n[c]);if(n.length){var l=i(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):t&&(this[t]=l)}return i}({3:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function r(){n(this,r),this.toString=Object.prototype.toString}return t(r,[{key:"getQuery",value:function(e){for(var t=window.location.search.replace("?","").split("&"),n={},r=0,o=t.length;r<o;r++){var i=t[r].split("=");n[i[0]]=i[1]}return n[e]?n[e]:""}},{key:"isFunction",value:function(e){return"[object Function]"===this.toString.call(e)}},{key:"isEqual",value:function(t,n,r,o){if(t===n)return 0!==t||1/t==1/n;if(null==t||null==n)return!1;if(t!=t)return n!=n;var i=void 0===t?"undefined":e(t);return("function"===i||"object"===i||"object"===(void 0===n?"undefined":e(n)))&&this.deepIsEqual(t,n,r,o)}},{key:"deepIsEqual",value:function(t,n,r,o){var i=this.toString.call(t);if(i!==this.toString.call(n))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+t==""+n;case"[object Number]":return+t!=+t?+n!=+n:0==+t?1/+t==1/n:+t==+n;case"[object Date]":case"[object Boolean]":return+t==+n}var u="[object Array]"===i;if(!u){if("object"!==(void 0===t?"undefined":e(t))||"object"!==(void 0===n?"undefined":e(n)))return!1;var c=t.constructor,a=n.constructor;if(c!==a&&!(this.isFunction(c)&&c instanceof c&&this.isFunction(a)&&a instanceof a)&&"constructor"in t&&"constructor"in n)return!1}r=r||[],o=o||[];for(var s=r.length;s--;)if(r[s]===t)return o[s]===n;if(r.push(t),o.push(n),u){if((s=t.length)!==n.length)return!1;for(;s--;)if(!this.isEqual(t[s],n[s],r,o))return!1}else{var l=Object.keys(t),f=void 0;if(s=l.length,Object.keys(n).length!==s)return!1;for(;s--;)if(f=l[s],!n.hasOwnProperty(f)||!this.isEqual(t[f],n[f],r,o))return!1}return r.pop(),o.pop(),!0}},{key:"setCookie",value:function(e,t,n){if(e&&t){var r=new Date;r.setDate(r.getDate()+n),document.cookie=e+"="+t+";expirse="+r}else console.error("set cookie error: key or value is null")}},{key:"getCookie",value:function(e){for(var t=document.cookie.split(";"),n=0;n<t.length;n++){var r=t[n].split("=");if(r[0]===e)return r[1]}return""}},{key:"removeCookie",value:function(e){this.setCookie(e,-1,-1)}}]),r}();exports.default=r;
},{}],4:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),e=require("./Utils"),n=i(e);function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var u=function(){function e(){a(this,e),this.declareTemplate="",this.state={},this.utils=new n.default}return t(e,[{key:"$onInit",value:function(){}},{key:"$beforeMount",value:function(){}},{key:"$afterMount",value:function(){}},{key:"$onDestory",value:function(){}},{key:"$hasRender",value:function(){}},{key:"$watchState",value:function(t,e){}},{key:"setState",value:function(t){if(t&&this.utils.isFunction(t)){var e=t();if(e&&e instanceof Object)for(var n in e)this.state[n]&&this.state[n]!==e[n]&&(this.state[n]=e[n])}if(t&&t instanceof Object)for(var i in t)this.state[i]&&this.state[i]!==t[i]&&(this.state[i]=t[i])}}]),e}();exports.default=u;
},{"./Utils":3}],5:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),r=require("./Utils"),n=a(r);function a(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function r(t,e,a,i){o(this,r),this.data=t,this.watcher=e,this.updater=a,this.render=i,this.watchData(this.data),this.utils=new n.default}return e(r,[{key:"watchData",value:function(e){if(e&&"object"===(void 0===e?"undefined":t(e))){var r=this,n=function(t){var n=e[t];r.watchData(n),Object.defineProperty(e,t,{configurable:!0,enumerable:!1,get:function(){return n},set:function(e){if(!r.utils.isEqual(e,n)){var a={};a[t]=n;var o={};o[t]=e,n=e,r.watchData(n),r.watcher&&r.watcher(a,o),r.updater&&r.updater(t,e),r.render&&r.render()}}})};for(var a in e)n(a)}}}]),r}();exports.default=i;
},{"./Utils":3}],6:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function n(){t(this,n)}return e(n,[{key:"_getVMVal",value:function(e,t){var n=e;return t.replace("()","").split(".").forEach(function(e){"this"!==e&&(n=n[e])}),n}},{key:"_setVMVal",value:function(e,t,n){var i=e;(t=t.split(".")).forEach(function(e,r){r<t.length-1?i=i[e]:i[e]=n})}},{key:"text",value:function(e,t,n){this.bind(e,t,n,"text")}},{key:"bind",value:function(e,t,n,i){var r=this[i+"Updater"];"model"===i?r&&r(e,this._getVMVal(t,n),n,t):r&&r(e,this._getVMVal(t,n))}},{key:"textUpdater",value:function(e,t){e.textContent=void 0===t?"":t}},{key:"htmlUpdater",value:function(e,t){e.innerHTML=void 0===t?"":t}},{key:"classUpdater",value:function(e,t,n){var i=e.className,r=(i=i.replace(n,"").replace(/\s$/,""))&&String(t)?" ":"";e.className=i+r+t}},{key:"modelUpdater",value:function(e,t,n,i){e.value=void 0===t?"":t;var r=n.replace(/(this.state.)|(this.props)/,"");e.addEventListener("change",function(){/(this.state.).*/.test(n)&&(i.state[r]=e.value),/(this.props.).*/.test(n)&&(i.props[r]=e.value)},!1)}}]),n}(),i=function(){function i(e,n){t(this,i),this.$vm=n,this.$el=this.isElementNode(e)?e:document.querySelector(e),this.$el&&(this.$fragment=this.node2Fragment(this.$el),this.init(),this.$el.appendChild(this.$fragment))}return e(i,[{key:"init",value:function(){this.compileElement(this.$fragment)}},{key:"compileElement",value:function(e){var t=this,n=document.createElement("div");n.innerHTML=this.$vm.declareTemplate;var i=n.childNodes;Array.from(i).forEach(function(n){var i=n.textContent;t.isElementNode(n)&&(t.compile(n),/\{\{(.*)\}\}/.test(i)&&t.compileText(n,RegExp.$1)),e.appendChild(n)})}},{key:"compile",value:function(e){var t=this,i=e.attributes;Array.from(i).forEach(function(i){var r=i.name;if(t.isDirective(r)){var a=r.substring(3),o=i.value;t.isEventDirective(a)?t.eventHandler(e,t.$vm,o,a):(new n).bind(e,t.$vm,o,a)}})}},{key:"node2Fragment",value:function(e){for(var t=document.createDocumentFragment();void 0===e.firstChild;)t.appendChild(void 0);return t}},{key:"compileText",value:function(e,t){(new n).text(e,this.$vm,t)}},{key:"eventHandler",value:function(e,t,n,i){var r=i.split(":")[1],a=t;n.replace("()","").split(".").forEach(function(e){"this"!==e&&(a=a[e])}),r&&a&&e.addEventListener(r,a.bind(t),!1)}},{key:"isDirective",value:function(e){return 0===e.indexOf("tr-")}},{key:"isEventDirective",value:function(e){return 0===e.indexOf("on")}},{key:"isElementNode",value:function(e){return 1===e.nodeType}}]),i}();exports.default=i;
},{}],7:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),t=require("./Lifecycle"),r=a(t),o=require("./Compile"),i=a(o),n=require("./Watcher"),s=a(n);function a(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=function(t){function o(e,t){p(this,o);var r=h(this,(o.__proto__||Object.getPrototypeOf(o)).call(this));return r.declareTemplateName=e,t&&(r.preProps=t,r.props={}),r.declareTemplate="",r.state={},r.fatherController={},r}return l(o,r.default),e(o,[{key:"$initProps",value:function(e){if(e)for(var t in this.preProps=e,this.props={},this.fatherController=window.routerController.declareComponents[this.declareTemplateName].preProps,this.fatherController)"string"==typeof this.preProps[t]&&(this.props[t]=window.routerController.state[this.fatherController[t]]),this.utils.isFunction(this.preProps[t])&&(this.props[t]=this.preProps[t])}},{key:"$beforeInit",value:function(){this.preProps&&(this.$initProps(this.preProps),this.propsWatcher=new s.default(this.props,this.$watchState.bind(this),this.$updateProps.bind(this),this.$reRender.bind(this))),this.stateWatcher=new s.default(this.state,this.$watchState.bind(this),null,this.$reRender.bind(this))}},{key:"$updateProps",value:function(e,t){var r=this.preProps[e];window.routerController.state[r]=t}},{key:"$render",value:function(){var e=document.getElementById("component_"+this.declareTemplateName);if(e&&e.hasChildNodes())for(var t=e.childNodes,r=t.length-1;r>=0;r--)e.removeChild(t.item(r));this.compile=new i.default("#component_"+this.declareTemplateName,this),this.$hasRender&&this.$hasRender()}},{key:"$reRender",value:function(){var e=document.getElementById("component_"+this.declareTemplateName);if(e&&e.hasChildNodes())for(var t=e.childNodes,r=t.length-1;r>=0;r--)e.removeChild(t.item(r));this.$onDestory&&this.$onDestory(),this.compile=new i.default("#component_"+this.declareTemplateName,this),this.$hasRender&&this.$hasRender()}},{key:"setProps",value:function(e){if(this.preProps){if(e&&this.utils.isFunction(e)){var t=e();if(t&&t instanceof Object)for(var r in t)this.props[r]&&this.props[r]!==t[r]&&(this.props[r]=t[r])}if(e&&e instanceof Object)for(var o in e)this.props[o]&&this.props[o]!==e[o]&&(this.props[o]=e[o])}}}]),o}();exports.default=u;
},{"./Lifecycle":4,"./Compile":6,"./Watcher":5}],8:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),t=require("./Lifecycle"),n=a(t),o=require("./Watcher"),r=a(o),i=require("./Compile"),s=a(i);function a(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=function(t){function o(){l(this,o);var e=c(this,(o.__proto__||Object.getPrototypeOf(o)).call(this));return e.declareTemplate="",e.state={},e.declareComponents={},e}return u(o,n.default),e(o,[{key:"$beforeInit",value:function(){this.stateWatcher=new r.default(this.state,this.$watchState.bind(this),this.$updateProps.bind(this),this.$reRender.bind(this))}},{key:"$updateProps",value:function(e,t){for(var n in this.declareComponents){var o=this.declareComponents[n],r=null;for(var i in o.preProps)o.preProps[i]===e&&(r=i);r&&t!==o.props[r]&&(o.props[r]=t)}}},{key:"$mountComponent",value:function(){var e=this,t=function(t){e.declareComponents[t].$beforeInit&&e.declareComponents[t].$beforeInit(),e.declareComponents[t].$onInit&&e.declareComponents[t].$onInit();var n=new RegExp("(<)("+t+")(/>)","g");e.declareTemplate=e.declareTemplate.replace(n,function(){return'<div id="component_'+t+'"></div>'}),e.declareComponents[t].$beforeMount&&e.declareComponents[t].$beforeMount()};for(var n in this.declareComponents)t(n)}},{key:"$render",value:function(){var e=document.getElementById("root");if(e.hasChildNodes())for(var t=e.childNodes,n=t.length-1;n>=0;n--)e.removeChild(t.item(n));if(this.$mountComponent(),this.compile=new s.default("#root",this),this.declareComponents)for(var o in this.declareComponents)this.declareComponents[o].$render&&this.declareComponents[o].$render(),this.declareComponents[o].$afterMount&&this.declareComponents[o].$afterMount();this.$hasRender&&this.$hasRender()}},{key:"$reRender",value:function(){var e=document.getElementById("root");if(e.hasChildNodes()){for(var t=e.childNodes,n=t.length-1;n>=0;n--)e.removeChild(t.item(n));this.$onDestory&&this.$onDestory()}if(this.$mountComponent(),this.compile=new s.default("#root",this),this.declareComponents)for(var o in this.declareComponents)this.declareComponents[o].$reRender&&this.declareComponents[o].$reRender(),this.declareComponents[o].$afterMount&&this.declareComponents[o].$afterMount();this.$hasRender&&this.$hasRender()}}]),o}();exports.default=d;
},{"./Lifecycle":4,"./Watcher":5,"./Compile":6}],9:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(r,t,o){return t&&e(r.prototype,t),o&&e(r,o),r}}(),r=require("./Utils"),t=o(r);function o(e){return e&&e.__esModule?e:{default:e}}function n(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var i=function(){function r(){n(this,r),this.routes={},this.currentUrl="",this.lastRoute=null,this.rootDom=null,this.utils=new t.default,window.addEventListener("load",this.refresh.bind(this),!1),window.addEventListener("hashchange",this.refresh.bind(this),!1)}return e(r,[{key:"$routeChange",value:function(e,r){}},{key:"init",value:function(e){var r=this;if(e&&e instanceof Array){e.forEach(function(e){if(!(e.path&&e.controller&&r.utils.isFunction(e.controller)))return console.error("need path or controller"),!1;r.route(e.path,e.controller)});var t=document.querySelector("#root");this.rootDom=t||null}else console.error("no routes exit")}},{key:"route",value:function(e,r){this.routes[e]=r||function(){}}},{key:"refresh",value:function(){var e=this;if(this.currentUrl=location.hash.slice(1)||"/",this.routes[this.currentUrl]){window.routerController&&(window.routerController.$onDestory&&window.routerController.$onDestory(),delete window.routerController);var r=new this.routes[this.currentUrl];window.routerController=r,r.$beforeInit&&r.$beforeInit(),r.$onInit&&r.$onInit(),this.renderController(r).then(function(){e.$routeChange(e.lastRoute,e.currentUrl),e.lastRoute=e.currentUrl}).catch(function(){console.error("route change failed")})}}},{key:"renderController",value:function(e){var r=e.declareTemplate;return r&&"string"==typeof r&&this.rootDom?(e.$beforeMount&&e.$beforeMount(),this.replaceDom(e).then(function(){e.$afterMount&&e.$afterMount()}),Promise.resolve()):(console.error("renderController failed: template or rootDom is not exit"),Promise.reject())}},{key:"replaceDom",value:function(e){return e.$render&&e.$render(),Promise.resolve()}}]),r}();exports.default=i;
},{"./Utils":3}],1:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Router=exports.Controller=exports.Component=exports.Compile=exports.Watcher=exports.Lifecycle=exports.Utils=void 0;var e=require("./Utils"),r=d(e),t=require("./Lifecycle"),o=d(t),l=require("./Watcher"),u=d(l),p=require("./Compile"),s=d(p),i=require("./Component"),x=d(i),a=require("./Controller"),f=d(a),n=require("./Router"),c=d(n);function d(e){return e&&e.__esModule?e:{default:e}}exports.Utils=r.default,exports.Lifecycle=o.default,exports.Watcher=u.default,exports.Compile=s.default,exports.Component=x.default,exports.Controller=f.default,exports.Router=c.default;
},{"./Utils":3,"./Lifecycle":4,"./Watcher":5,"./Compile":6,"./Component":7,"./Controller":8,"./Router":9}]},{},[1], null)
//# sourceMappingURL=/index.map