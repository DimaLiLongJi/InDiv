require=function(r,e,n){function t(n,o){function i(r){return t(i.resolve(r))}function f(e){return r[n][1][e]||e}if(!e[n]){if(!r[n]){var c="function"==typeof require&&require;if(!o&&c)return c(n,!0);if(u)return u(n,!0);var l=new Error("Cannot find module '"+n+"'");throw l.code="MODULE_NOT_FOUND",l}i.resolve=f;var a=e[n]=new t.Module;r[n][0].call(a.exports,i,a,a.exports)}return e[n].exports}function o(){this.bundle=t,this.exports={}}var u="function"==typeof require&&require;t.Module=o,t.modules=r,t.cache=e,t.parent=u;for(var i=0;i<n.length;i++)t(n[i]);return t}({2:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class t{constructor(){this.toString=Object.prototype.toString}getQuery(t){let e=window.location.search.replace("?","").split("&"),r={};for(let t=0,o=e.length;t<o;t++){let o=e[t].split("=");r[o[0]]=o[1]}return r[t]?r[t]:""}isFunction(t){return"[object Function]"===this.toString.call(t)}isEqual(t,e,r,o){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;let n=typeof t;return("function"===n||"object"===n||"object"==typeof e)&&this.deepIsEqual(t,e,r,o)}deepIsEqual(t,e,r,o){let n=this.toString.call(t);if(n!==this.toString.call(e))return!1;switch(n){case"[object RegExp]":case"[object String]":return`${t}`===`${e}`;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e}let i="[object Array]"===n;if(!i){if("object"!=typeof t||"object"!=typeof e)return!1;let r=t.constructor,o=e.constructor;if(r!==o&&!(this.isFunction(r)&&r instanceof r&&this.isFunction(o)&&o instanceof o)&&"constructor"in t&&"constructor"in e)return!1}r=r||[],o=o||[];let s=r.length;for(;s--;)if(r[s]===t)return o[s]===e;if(r.push(t),o.push(e),i){if((s=t.length)!==e.length)return!1;for(;s--;)if(!this.isEqual(t[s],e[s],r,o))return!1}else{let n,i=Object.keys(t);if(s=i.length,Object.keys(e).length!==s)return!1;for(;s--;)if(n=i[s],!e.hasOwnProperty(n)||!this.isEqual(t[n],e[n],r,o))return!1}return r.pop(),o.pop(),!0}setCookie(t,e,r){if(!t||!e)return;let o=new Date;o.setDate(o.getDate()+r),document.cookie=`${t}=${e};expirse=${o}`}getCookie(t){const e=document.cookie.split(";");for(let r=0;r<e.length;r++){let o=e[r].split("=");if(o[0]===t)return o[1]}return""}removeCookie(t){this.setCookie(t,-1,-1)}}exports.default=t;
},{}],3:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./Utils"),e=s(t);function s(t){return t&&t.__esModule?t:{default:t}}class i{constructor(){this.declareTemplate="",this.state={},this.utils=new e.default}$onInit(){}$beforeMount(){}$afterMount(){}$onDestory(){}$hasRender(){}$watchState(t,e){}setState(t){if(t&&this.utils.isFunction(t)){const s=t();if(s&&s instanceof Object)for(var e in s)this.state[e]&&this.state[e]!==s[e]&&(this.state[e]=s[e])}if(t&&t instanceof Object)for(let e in t)this.state[e]&&this.state[e]!==t[e]&&(this.state[e]=t[e])}}exports.default=i;
},{"./Utils":2}],4:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./Utils"),e=r(t);function r(t){return t&&t.__esModule?t:{default:t}}class a{constructor(t,r,a,s){this.data=t,this.watcher=r,this.updater=a,this.render=s,this.watchData(this.data),this.utils=new e.default}watchData(t){if(!t||"object"!=typeof t)return;const e=this;for(let r in t){let a=t[r];e.watchData(a),Object.defineProperty(t,r,{configurable:!0,enumerable:!1,get:()=>a,set(t){if(e.utils.isEqual(t,a))return;const s={};s[r]=a;const i={};i[r]=t,a=t,e.watchData(a),e.watcher&&e.watcher(s,i),e.updater&&e.updater(r,t),e.render&&e.render()}})}}}exports.default=a;
},{"./Utils":2}],5:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class e{_getVMVal(e,t){let i=e;return t.replace("()","").split(".").forEach(e=>{"this"!==e&&(i=i[e])}),i}_setVMVal(e,t,i){var s=e;(t=t.split(".")).forEach((e,n)=>{n<t.length-1?s=s[e]:s[e]=i})}text(e,t,i){this.bind(e,t,i,"text")}bind(e,t,i,s){const n=this[`${s}Updater`];"model"===s?n&&n(e,this._getVMVal(t,i),i,t):n&&n(e,this._getVMVal(t,i))}textUpdater(e,t){e.textContent=void 0===t?"":t}htmlUpdater(e,t){e.innerHTML=void 0===t?"":t}classUpdater(e,t,i){let s=e.className;const n=(s=s.replace(i,"").replace(/\s$/,""))&&String(t)?" ":"";e.className=s+n+t}modelUpdater(e,t,i,s){e.value=void 0===t?"":t;const n=i.replace(/(this.state.)|(this.props)/,"");e.addEventListener("change",function(){/(this.state.).*/.test(i)&&(s.state[n]=e.value),/(this.props.).*/.test(i)&&(s.props[n]=e.value)},!1)}}class t{constructor(e,t){this.$vm=t,this.$el=this.isElementNode(e)?e:document.querySelector(e),this.$el&&(this.$fragment=this.node2Fragment(this.$el),this.init(),this.$el.appendChild(this.$fragment))}init(){this.compileElement(this.$fragment)}compileElement(e){const t=document.createElement("div");t.innerHTML=this.$vm.declareTemplate;let i=t.childNodes;Array.from(i).forEach(t=>{const i=t.textContent,s=/\{\{(.*)\}\}/;this.isElementNode(t)&&(this.compile(t),s.test(i)&&this.compileText(t,RegExp.$1)),e.appendChild(t)})}compile(t){const i=t.attributes;Array.from(i).forEach(i=>{const s=i.name;if(this.isDirective(s)){const n=s.substring(3),r=i.value;this.isEventDirective(n)?this.eventHandler(t,this.$vm,r,n):(new e).bind(t,this.$vm,r,n)}})}node2Fragment(e){const t=document.createDocumentFragment();let i;for(;i===e.firstChild;)t.appendChild(i);return t}compileText(t,i){(new e).text(t,this.$vm,i)}eventHandler(e,t,i,s){const n=s.split(":")[1];let r=t;i.replace("()","").split(".").forEach(e=>{"this"!==e&&(r=r[e])}),n&&r&&e.addEventListener(n,r.bind(t),!1)}isDirective(e){return 0===e.indexOf("tr-")}isEventDirective(e){return 0===e.indexOf("on")}isElementNode(e){return 1===e.nodeType}}exports.default=t;
},{}],6:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./Lifecycle"),t=h(e),s=require("./Compile"),r=h(s),i=require("./Watcher"),o=h(i);function h(e){return e&&e.__esModule?e:{default:e}}class n extends t.default{constructor(e,t){super(),this.declareTemplateName=e,t&&(this.preProps=t,this.props={}),this.declareTemplate="",this.state={},this.fatherController={}}$initProps(e){if(e){this.preProps=e,this.props={},this.fatherController=window.routerController.declareComponents[this.declareTemplateName].preProps;for(let e in this.fatherController)"string"==typeof this.preProps[e]&&(this.props[e]=window.routerController.state[this.fatherController[e]]),this.utils.isFunction(this.preProps[e])&&(this.props[e]=this.preProps[e])}}$beforeInit(){this.preProps&&(this.$initProps(this.preProps),this.propsWatcher=new o.default(this.props,this.$watchState.bind(this),this.$updateProps.bind(this),this.$reRender.bind(this))),this.stateWatcher=new o.default(this.state,this.$watchState.bind(this),null,this.$reRender.bind(this))}$updateProps(e,t){const s=this.preProps[e];window.routerController.state[s]=t}$render(){const e=document.getElementById(`component_${this.declareTemplateName}`);if(e&&e.hasChildNodes()){let t=e.childNodes;for(let s=t.length-1;s>=0;s--)e.removeChild(t.item(s))}this.compile=new r.default(`#component_${this.declareTemplateName}`,this),this.$hasRender&&this.$hasRender()}$reRender(){const e=document.getElementById(`component_${this.declareTemplateName}`);if(e&&e.hasChildNodes()){let t=e.childNodes;for(let s=t.length-1;s>=0;s--)e.removeChild(t.item(s))}this.$onDestory&&this.$onDestory(),this.compile=new r.default(`#component_${this.declareTemplateName}`,this),this.$hasRender&&this.$hasRender()}setProps(e){if(this.preProps){if(e&&this.utils.isFunction(e)){const s=e();if(s&&s instanceof Object)for(var t in s)this.props[t]&&this.props[t]!==s[t]&&(this.props[t]=s[t])}if(e&&e instanceof Object)for(let t in e)this.props[t]&&this.props[t]!==e[t]&&(this.props[t]=e[t])}}}exports.default=n;
},{"./Lifecycle":3,"./Compile":5,"./Watcher":4}],7:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./Lifecycle"),t=i(e),o=require("./Watcher"),n=i(o),s=require("./Compile"),r=i(s);function i(e){return e&&e.__esModule?e:{default:e}}class d extends t.default{constructor(){super(),this.declareTemplate="",this.state={},this.declareComponents={}}$beforeInit(){this.stateWatcher=new n.default(this.state,this.$watchState.bind(this),this.$updateProps.bind(this),this.$reRender.bind(this))}$updateProps(e,t){for(var o in this.declareComponents){const n=this.declareComponents[o];let s=null;for(let t in n.preProps)n.preProps[t]===e&&(s=t);s&&t!==n.props[s]&&(n.props[s]=t)}}$mountComponent(){for(let e in this.declareComponents){this.declareComponents[e].$beforeInit&&this.declareComponents[e].$beforeInit(),this.declareComponents[e].$onInit&&this.declareComponents[e].$onInit();const t=new RegExp(`(<)(${e})(/>)`,"g");this.declareTemplate=this.declareTemplate.replace(t,(...t)=>`<div id="component_${e}"></div>`),this.declareComponents[e].$beforeMount&&this.declareComponents[e].$beforeMount()}}$render(){const e=document.getElementById("root");if(e.hasChildNodes()){let t=e.childNodes;for(let o=t.length-1;o>=0;o--)e.removeChild(t.item(o))}if(this.$mountComponent(),this.compile=new r.default("#root",this),this.declareComponents)for(let e in this.declareComponents)this.declareComponents[e].$render&&this.declareComponents[e].$render(),this.declareComponents[e].$afterMount&&this.declareComponents[e].$afterMount();this.$hasRender&&this.$hasRender()}$reRender(){const e=document.getElementById("root");if(e.hasChildNodes()){let t=e.childNodes;for(let o=t.length-1;o>=0;o--)e.removeChild(t.item(o));this.$onDestory&&this.$onDestory()}if(this.$mountComponent(),this.compile=new r.default("#root",this),this.declareComponents)for(let e in this.declareComponents)this.declareComponents[e].$reRender&&this.declareComponents[e].$reRender(),this.declareComponents[e].$afterMount&&this.declareComponents[e].$afterMount();this.$hasRender&&this.$hasRender()}}exports.default=d;
},{"./Lifecycle":3,"./Watcher":4,"./Compile":5}],8:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./Utils"),e=r(t);function r(t){return t&&t.__esModule?t:{default:t}}class o{constructor(){this.routes={},this.currentUrl="",this.lastRoute=null,this.rootDom=null,this.utils=new e.default,window.addEventListener("load",this.refresh.bind(this),!1),window.addEventListener("hashchange",this.refresh.bind(this),!1)}$routeChange(t,e){}init(t){if(t&&t instanceof Array){t.forEach(t=>{if(!(t.path&&t.controller&&this.utils.isFunction(t.controller)))return!1;this.route(t.path,t.controller)});const e=document.querySelector("#root");this.rootDom=e||null}}route(t,e){this.routes[t]=e||function(){}}refresh(){if(this.currentUrl=location.hash.slice(1)||"/",this.routes[this.currentUrl]){window.routerController&&(window.routerController.$onDestory&&window.routerController.$onDestory(),delete window.routerController);const t=new this.routes[this.currentUrl];window.routerController=t,t.$beforeInit&&t.$beforeInit(),t.$onInit&&t.$onInit(),this.renderController(t).then(()=>{this.$routeChange(this.lastRoute,this.currentUrl),this.lastRoute=this.currentUrl}).catch(()=>{})}}renderController(t){const e=t.declareTemplate;return e&&"string"==typeof e&&this.rootDom?(t.$beforeMount&&t.$beforeMount(),this.replaceDom(t).then(()=>{t.$afterMount&&t.$afterMount()}),Promise.resolve()):Promise.reject()}replaceDom(t){return t.$render&&t.$render(),Promise.resolve()}}exports.default=o;
},{"./Utils":2}],1:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Router=exports.Controller=exports.Component=exports.Compile=exports.Watcher=exports.Lifecycle=exports.Utils=void 0;var e=require("./Utils"),r=d(e),t=require("./Lifecycle"),o=d(t),l=require("./Watcher"),u=d(l),p=require("./Compile"),s=d(p),i=require("./Component"),x=d(i),a=require("./Controller"),f=d(a),n=require("./Router"),c=d(n);function d(e){return e&&e.__esModule?e:{default:e}}exports.Utils=r.default,exports.Lifecycle=o.default,exports.Watcher=u.default,exports.Compile=s.default,exports.Component=x.default,exports.Controller=f.default,exports.Router=c.default;
},{"./Utils":2,"./Lifecycle":3,"./Watcher":4,"./Compile":5,"./Component":6,"./Controller":7,"./Router":8}]},{},[1])