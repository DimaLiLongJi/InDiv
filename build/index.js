parcelRequire=function(e,r,n,t){function i(n,t){function o(e){return i(o.resolve(e))}function c(r){return e[n][1][r]||r}if(!r[n]){if(!e[n]){var l="function"==typeof parcelRequire&&parcelRequire;if(!t&&l)return l(n,!0);if(u)return u(n,!0);if(f&&"string"==typeof n)return f(n);var p=new Error("Cannot find module '"+n+"'");throw p.code="MODULE_NOT_FOUND",p}o.resolve=c;var a=r[n]=new i.Module(n);e[n][0].call(a.exports,o,a,a.exports,this)}return r[n].exports}function o(e){this.id=e,this.bundle=i,this.exports={}}var u="function"==typeof parcelRequire&&parcelRequire,f="function"==typeof require&&require;i.isParcelRequire=!0,i.Module=o,i.modules=e,i.cache=r,i.parent=u;for(var c=0;c<n.length;c++)i(n[c]);if(n.length){var l=i(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):t&&(this[t]=l)}return i}({2:[function(require,module,exports) {
var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function r(){n(this,r),this.toString=Object.prototype.toString}return t(r,[{key:"buildQuery",value:function(e){if(!(e&&e instanceof Object))return"";var t="?";for(var n in e)e[n]instanceof Object?t+=n+"="+JSON.stringify(e[n])+"&":t+=n+"="+e[n].toString()+"&";return t.slice(0,t.length-1)}},{key:"getQuery",value:function(e){for(var t=window.location.search.replace("?","").split("&"),n={},r=0,o=t.length;r<o;r++){var i=t[r].split("=");n[i[0]]=i[1]}return n[e]?n[e]:""}},{key:"isFunction",value:function(e){return"[object Function]"===this.toString.call(e)}},{key:"isEqual",value:function(t,n,r,o){if(t===n)return 0!==t||1/t==1/n;if(null==t||null==n)return!1;if(t!=t)return n!=n;var i=void 0===t?"undefined":e(t);return("function"===i||"object"===i||"object"===(void 0===n?"undefined":e(n)))&&this.deepIsEqual(t,n,r,o)}},{key:"deepIsEqual",value:function(t,n,r,o){var i=this.toString.call(t);if(i!==this.toString.call(n))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+t==""+n;case"[object Number]":return+t!=+t?+n!=+n:0==+t?1/+t==1/n:+t==+n;case"[object Date]":case"[object Boolean]":return+t==+n}var u="[object Array]"===i;if(!u){if("object"!==(void 0===t?"undefined":e(t))||"object"!==(void 0===n?"undefined":e(n)))return!1;var c=t.constructor,a=n.constructor;if(c!==a&&!(this.isFunction(c)&&c instanceof c&&this.isFunction(a)&&a instanceof a)&&"constructor"in t&&"constructor"in n)return!1}r=r||[],o=o||[];for(var l=r.length;l--;)if(r[l]===t)return o[l]===n;if(r.push(t),o.push(n),u){if((l=t.length)!==n.length)return!1;for(;l--;)if(!this.isEqual(t[l],n[l],r,o))return!1}else{var s=Object.keys(t),f=void 0;if(l=s.length,Object.keys(n).length!==l)return!1;for(;l--;)if(f=s[l],!n.hasOwnProperty(f)||!this.isEqual(t[f],n[f],r,o))return!1}return r.pop(),o.pop(),!0}},{key:"setCookie",value:function(e,t,n){if(e&&t){var r=new Date;r.setDate(r.getDate()+n),document.cookie=e+"="+t+";expirse="+r}else console.error("set cookie error: key or value is null")}},{key:"getCookie",value:function(e){for(var t=document.cookie.split(";"),n=0;n<t.length;n++){var r=t[n].split("=");if(r[0]===e)return r[1]}return""}},{key:"removeCookie",value:function(e){this.setCookie(e,-1,-1)}}]),r}();module.exports=r;
},{}],3:[function(require,module,exports) {
var t=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}();function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=require("./Utils"),a=function(){function a(){e(this,a),this.declareTemplate="",this.state={},this.utils=new n,this.$location={state:this.$getLocationState.bind(this),go:this.$locationGo.bind(this)}}return t(a,[{key:"$onInit",value:function(){}},{key:"$beforeMount",value:function(){}},{key:"$afterMount",value:function(){}},{key:"$onDestory",value:function(){}},{key:"$hasRender",value:function(){}},{key:"$watchState",value:function(t,e){}},{key:"$getLocationState",value:function(){return{path:window._esRouteObject.path,query:window._esRouteObject.query,params:window._esRouteObject.params}}},{key:"$locationGo",value:function(t,e,n){window._esRouteObject={path:t,query:e,params:n},"state"===window._esRouteMode&&history.pushState({path:t,query:e,params:n},null,""+t+this.utils.buildQuery(e)),"hash"===window._esRouteMode&&history.pushState({path:t,query:e,params:n},null,"#"+t+this.utils.buildQuery(e))}},{key:"setState",value:function(t){if(t&&this.utils.isFunction(t)){var e=t();if(e&&e instanceof Object)for(var n in e)this.state.hasOwnProperty(n)&&this.state[n]!==e[n]&&(this.state[n]=e[n])}if(t&&t instanceof Object)for(var a in t)this.state.hasOwnProperty(a)&&this.state[a]!==t[a]&&(this.state[a]=t[a])}}]),a}();module.exports=a;
},{"./Utils":2}],4:[function(require,module,exports) {
var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=require("./Utils"),a=function(){function a(t,e,o,i){n(this,a),this.data=t,this.watcher=e,this.updater=o,this.render=i,this.watchData(this.data),this.utils=new r}return e(a,[{key:"watchData",value:function(e){if(e&&"object"===(void 0===e?"undefined":t(e))){var n=this,r=function(t){var r=e[t];n.watchData(r),Object.defineProperty(e,t,{configurable:!0,enumerable:!1,get:function(){return r},set:function(e){if(!n.utils.isEqual(e,r)){var a={};a[t]=r;var o={};o[t]=e,r=e,n.watchData(r),n.watcher&&n.watcher(a,o),n.updater&&n.updater(t,e),n.render&&n.render()}}})};for(var a in e)r(a)}}}]),a}();module.exports=a;
},{"./Utils":2}],5:[function(require,module,exports) {
var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}();function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=require("./Utils"),r=function(){function r(t,e,i){n(this,r),this.data=t,this.watcher=i,this.key=e,this.watchData(this.data,this.key),this.utils=new o}return e(r,[{key:"watchData",value:function(e,n){if(e&&"object"===(void 0===e?"undefined":t(e))&&e[n]){var o=this,r=e[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,get:function(){return r},set:function(t){if(!o.utils.isEqual(t,r)&&t!==r){var e={};e[n]=r;var i={};i[n]=t,r=t,o.watcher&&o.watcher(e,i)}}})}}}]),r}();module.exports=r;
},{"./Utils":2}],7:[function(require,module,exports) {
var e=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function n(e){t(this,n),this.$fragment=e}return e(n,[{key:"_getVMVal",value:function(e,t){var n=e;return t.replace("()","").split(".").forEach(function(e){"this"!==e&&(n=n[e])}),n}},{key:"_getVMRepeatVal",value:function(e,t,n){var a=void 0;return t.replace("()","").split(".").forEach(function(t){a=t!==n?a[t]:e}),a}},{key:"bind",value:function(e,t,n,a,i,r,s,l){var u=void 0;u=0===i.indexOf(n)||0===i.indexOf(n+".")?this._getVMRepeatVal(t,i,n):this._getVMVal(s,i);var o=this._getVMVal(s,l);this.templateUpdater(e,t,n,s);var c=this[a+"Updater"];switch(a){case"model":c&&c.call(this,e,u,i,n,r,o,l,s);break;default:c&&c.call(this,e,u)}}},{key:"templateUpdater",value:function(e,t,n,a){var i=e.textContent;if(/\{\{(.*)\}\}/g.test(i)){var r=RegExp.$1,s=void 0;s=0===r.indexOf(n)||0===r.indexOf(n+".")?this._getVMRepeatVal(t,r,n):this._getVMVal(a,r),e.textContent=e.textContent.replace(/(\{\{.*\}\})/g,s)}}},{key:"textUpdater",value:function(e,t){e.textContent=void 0===t?"":t}},{key:"htmlUpdater",value:function(e,t){e.innerHTML=void 0===t?"":t}},{key:"ifUpdater",value:function(e,t){t&&this.$fragment.appendChild(e)}},{key:"classUpdater",value:function(e,t,n){var a=e.className,i=(a=a.replace(n,"").replace(/\s$/,""))&&String(t)?" ":"";e.className=a+i+t}},{key:"modelUpdater",value:function(e,t,n,a,i,r,s,l){e.value=void 0===t?"":t;var u=n.replace(a+".","");e.addEventListener("change",function(e){e.preventDefault(),e.target.value!==r[i][u]&&(r[i][u]=e.target.value)},!1)}},{key:"eventHandler",value:function(e,t,n,a,i,r){var s=this,l=a.split(":")[1],u=n.replace(/\(.*\)/,"").split("."),o=n.match(/\((.*)\)/)[1].replace(/ /g,"").split(","),c=t;u.forEach(function(e){"this"!==e&&(c=c[e])});l&&c&&e.addEventListener(l,function(e){var n=[];o.forEach(function(a){if(""===a)return!1;"$event"===a&&n.push(e),(/(this.).*/g.test(a)||/(this.state.).*/g.test(a)||/(this.props.).*/g.test(a))&&n.push(s._getVMVal(t,a)),/\'.*\'/g.test(a)&&n.push(a.match(/\'(.*)\'/)[1]),!/\'.*\'/g.test(a)&&/^[0-9]*$/g.test(a)&&n.push(Number(a)),"true"!==a&&"false"!==a||n.push("true"===a),0!==a.indexOf(i)&&0!==a.indexOf(i+".")||n.push(s._getVMRepeatVal(r,a,i))}),c.apply(t,n)},!1)}}]),n}(),a=function(){function a(e){t(this,a),this.$fragment=e}return e(a,[{key:"_getVMVal",value:function(e,t){var n=e;return t.replace("()","").split(".").forEach(function(e){"this"!==e&&(n=n[e])}),n}},{key:"_getVMRepeatVal",value:function(e,t){var n=t.split(" ");return this._getVMVal(e,n[3])}},{key:"_setVMVal",value:function(e,t,n){var a=e;(t=t.split(".")).forEach(function(e,i){i<t.length-1?a=a[e]:a[e]=n})}},{key:"bind",value:function(e,t,n,a){var i=this[a+"Updater"];if(this.isRepeatNode(e))switch(a){case"repeat":i&&i.call(this,e,this._getVMRepeatVal(t,n),n,t)}else switch(a){case"model":i&&i.call(this,e,this._getVMVal(t,n),n,t);break;case"text":i&&i.call(this,e,this._getVMVal(t,n));break;case"if":i&&i.call(this,e,this._getVMVal(t,n),n,t);break;default:i&&i.call(this,e,this._getVMVal(t,n))}}},{key:"templateUpdater",value:function(e,t,n){e.textContent=e.textContent.replace(/(\{\{.*\}\})/g,this._getVMVal(t,n))}},{key:"textUpdater",value:function(e,t){e.textContent=void 0===t?"":t}},{key:"htmlUpdater",value:function(e,t){e.innerHTML=void 0===t?"":t}},{key:"ifUpdater",value:function(e,t){!t&&this.$fragment.contains(e)?this.$fragment.removeChild(e):this.$fragment.appendChild(e)}},{key:"classUpdater",value:function(e,t,n){var a=e.className,i=(a=a.replace(n,"").replace(/\s$/,""))&&String(t)?" ":"";e.className=a+i+t}},{key:"modelUpdater",value:function(e,t,n,a){e.value=void 0===t?"":t;var i=n.replace(/(this.state.)|(this.props)/,"");e.addEventListener("change",function(e){e.preventDefault(),/(this.state.).*/.test(n)&&(a.state[i]=e.target.value),/(this.props.).*/.test(n)&&(a.props[i]=e.target.value)},!1)}},{key:"repeatUpdater",value:function(e,t,a,i){var r=this,s=a.split(" ")[1],l=a.split(" ")[3];t.forEach(function(t,a){var u=e.cloneNode(!0),o=u.attributes,c=u.textContent;/\{\{(.*)\}\}/g.test(c)&&c.indexOf("{{"+s)>=0&&new n(r.$fragment).templateUpdater(u,t,s,i),o&&Array.from(o).forEach(function(e){var o=e.name;if(r.isDirective(o)&&"es-repeat"!==o){var c=o.substring(3),f=e.value;r.isEventDirective(c)?new n(r.$fragment).eventHandler(u,i,f,c,s,t):new n(r.$fragment).bind(u,t,s,c,f,a,i,l)}}),r.isIfNode(e)||r.$fragment.appendChild(u)})}},{key:"isDirective",value:function(e){return 0===e.indexOf("es-")}},{key:"isEventDirective",value:function(e){return 0===e.indexOf("on")}},{key:"isElementNode",value:function(e){return 1===e.nodeType}},{key:"isRepeatNode",value:function(e){var t=e.attributes,n=!1;return t&&Array.from(t).forEach(function(e){"es-repeat"===e.name&&(n=!0)}),n}},{key:"isIfNode",value:function(e){var t=e.attributes,n=!1;return t&&Array.from(t).forEach(function(e){"es-if"===e.name&&(n=!0)}),n}}]),a}(),i=function(){function n(e,a){t(this,n),this.$vm=a,this.$el=this.isElementNode(e)?e:document.querySelector(e),this.$el&&(this.$fragment=this.node2Fragment(this.$el),this.init(),this.$el.appendChild(this.$fragment))}return e(n,[{key:"init",value:function(){this.compileElement(this.$fragment)}},{key:"compileElement",value:function(e){var t=document.createElement("div");t.innerHTML=this.$vm.declareTemplate;var n=t.childNodes;this.domRecursion(n,e)}},{key:"domRecursion",value:function(e,t){var n=this;Array.from(e).forEach(function(e){e.hasChildNodes()&&n.domRecursion(e.childNodes,e);var a=e.textContent;if(n.isElementNode(e)){if(/\{\{(.*)\}\}/g.test(a)){var i=RegExp.$1;/(.*\{\{(this.state.).*\}\}.*)|(.*\{\{(this.props.).*\}\}.*)/g.test(a)&&n.compileText(e,i)}n.compile(e,t)}n.isRepeatNode(e)&&t.contains(e)?t.removeChild(e):n.isIfNode(e)||t.appendChild(e)})}},{key:"compile",value:function(e,t){var n=this,i=e.attributes;i&&Array.from(i).forEach(function(i){var r=i.name;if(n.isDirective(r)){var s=r.substring(3),l=i.value;n.isEventDirective(s)?n.eventHandler(e,n.$vm,l,s):new a(t).bind(e,n.$vm,l,s)}})}},{key:"node2Fragment",value:function(e){for(var t=document.createDocumentFragment();void 0===e.firstChild;)t.appendChild(void 0);return t}},{key:"compileText",value:function(e,t){new a(this.$fragment).templateUpdater(e,this.$vm,t)}},{key:"eventHandler",value:function(e,t,n,i){var r=new a,s=i.split(":")[1],l=n.replace(/\(.*\)/,"").split("."),u=n.match(/\((.*)\)/)[1].replace(/\s+/g,"").split(","),o=t;l.forEach(function(e){"this"!==e&&(o=o[e])});s&&o&&e.addEventListener(s,function(e){var n=[];u.forEach(function(a){if(""===a)return!1;"$event"===a&&n.push(e),(/(this.).*/g.test(a)||/(this.state.).*/g.test(a)||/(this.props.).*/g.test(a))&&n.push(r._getVMVal(t,a)),/\'.*\'/g.test(a)&&n.push(a.match(/\'(.*)\'/)[1]),!/\'.*\'/g.test(a)&&/^[0-9]*$/g.test(a)&&n.push(Number(a)),"true"!==a&&"false"!==a||n.push("true"===a)}),o.apply(t,n)},!1)}},{key:"isDirective",value:function(e){return 0===e.indexOf("es-")}},{key:"isEventDirective",value:function(e){return 0===e.indexOf("on")}},{key:"isElementNode",value:function(e){return 1===e.nodeType}},{key:"isRepeatNode",value:function(e){var t=e.attributes,n=!1;return t&&Array.from(t).forEach(function(e){"es-repeat"===e.name&&(n=!0)}),n}},{key:"isIfNode",value:function(e){var t=e.attributes,n=!1;return t&&Array.from(t).forEach(function(e){"es-if"===e.name&&(n=!0)}),n}},{key:"isTextNode",value:function(e){return 3===e.nodeType}}]),n}();module.exports=i;
},{}],6:[function(require,module,exports) {
var e=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}();function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=require("./Lifecycle"),n=require("./Compile"),s=require("./Watcher"),a=function(a){function p(e,o){t(this,p);var i=r(this,(p.__proto__||Object.getPrototypeOf(p)).call(this));return i.declareTemplateName=e,o&&(i.preProps=o,i.props={}),i.declareTemplate="",i.state={},i.fatherController={},i}return o(p,i),e(p,[{key:"$initProps",value:function(e){if(e)for(var t in this.preProps=e,this.props={},this.fatherController=window.routerController.declareComponents[this.declareTemplateName].preProps,this.fatherController)"string"==typeof this.preProps[t]&&(this.props[t]=window.routerController.state[this.fatherController[t]]),this.utils.isFunction(this.preProps[t])&&(this.props[t]=this.preProps[t])}},{key:"$beforeInit",value:function(){this.preProps&&(this.$initProps(this.preProps),this.propsWatcher=new s(this.props,this.$watchState.bind(this),this.$updateProps.bind(this),this.$reRender.bind(this))),this.stateWatcher=new s(this.state,this.$watchState.bind(this),null,this.$reRender.bind(this))}},{key:"$updateProps",value:function(e,t){var r=this.preProps[e];window.routerController.state[r]=t}},{key:"$render",value:function(){var e=document.getElementById("component_"+this.declareTemplateName);if(e&&e.hasChildNodes())for(var t=e.childNodes,r=t.length-1;r>=0;r--)e.removeChild(t.item(r));this.compile=new n("#component_"+this.declareTemplateName,this),this.$hasRender&&this.$hasRender()}},{key:"$reRender",value:function(){var e=document.getElementById("component_"+this.declareTemplateName);if(e&&e.hasChildNodes())for(var t=e.childNodes,r=t.length-1;r>=0;r--)e.removeChild(t.item(r));this.$onDestory&&this.$onDestory(),this.compile=new n("#component_"+this.declareTemplateName,this),this.$hasRender&&this.$hasRender()}},{key:"setProps",value:function(e){if(this.preProps){if(e&&this.utils.isFunction(e)){var t=e();if(t&&t instanceof Object)for(var r in t)this.props.hasOwnProperty(r)&&this.props[r]!==t[r]&&(this.props[r]=t[r])}if(e&&e instanceof Object)for(var o in e)this.props.hasOwnProperty(o)&&this.props[o]!==e[o]&&(this.props[o]=e[o])}}}]),p}();module.exports=a;
},{"./Lifecycle":3,"./Compile":7,"./Watcher":4}],8:[function(require,module,exports) {
var e=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=require("./Lifecycle"),i=require("./Watcher"),s=require("./Compile"),a=function(a){function c(){t(this,c);var e=n(this,(c.__proto__||Object.getPrototypeOf(c)).call(this));return e.declareTemplate="",e.state={},e.declareComponents={},e}return o(c,r),e(c,[{key:"$beforeInit",value:function(){this.stateWatcher=new i(this.state,this.$watchState.bind(this),this.$updateProps.bind(this),this.$reRender.bind(this))}},{key:"$updateProps",value:function(e,t){for(var n in this.declareComponents){var o=this.declareComponents[n],r=null;for(var i in o.preProps)o.preProps[i]===e&&(r=i);r&&t!==o.props[r]&&(o.props[r]=t)}}},{key:"$mountComponent",value:function(){var e=this,t=function(t){e.declareComponents[t].$beforeInit&&e.declareComponents[t].$beforeInit(),e.declareComponents[t].$onInit&&e.declareComponents[t].$onInit();var n=new RegExp("(<)("+t+")(/>)","g");e.declareTemplate=e.declareTemplate.replace(n,function(){return'<div id="component_'+t+'"></div>'}),e.declareComponents[t].$beforeMount&&e.declareComponents[t].$beforeMount()};for(var n in this.declareComponents)t(n)}},{key:"$render",value:function(){var e=document.getElementById("root");if(e.hasChildNodes())for(var t=e.childNodes,n=t.length-1;n>=0;n--)e.removeChild(t.item(n));if(this.$mountComponent(),this.compile=new s("#root",this),this.declareComponents)for(var o in this.declareComponents)this.declareComponents[o].$render&&this.declareComponents[o].$render(),this.declareComponents[o].$afterMount&&this.declareComponents[o].$afterMount();this.$hasRender&&this.$hasRender()}},{key:"$reRender",value:function(){var e=document.getElementById("root");if(e.hasChildNodes()){for(var t=e.childNodes,n=t.length-1;n>=0;n--)e.removeChild(t.item(n));this.$onDestory&&this.$onDestory()}if(this.$mountComponent(),this.compile=new s("#root",this),this.declareComponents)for(var o in this.declareComponents)this.declareComponents[o].$reRender&&this.declareComponents[o].$reRender(),this.declareComponents[o].$afterMount&&this.declareComponents[o].$afterMount();this.$hasRender&&this.$hasRender()}}]),c}();module.exports=a;
},{"./Lifecycle":3,"./Watcher":4,"./Compile":7}],9:[function(require,module,exports) {
var e=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}();function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=require("./Utils"),o=require("./KeyWatcher"),n=function(){function n(){var e=this;t(this,n),this.routes={},this.currentUrl="",this.lastRoute=null,this.rootDom=null,this.utils=new r,window.addEventListener("load",this.refresh.bind(this),!1),window.addEventListener("popstate",function(t){window._esRouteObject={path:location.pathname||"/",query:{},params:{}},e.refresh()},!1)}return e(n,[{key:"$routeChange",value:function(e,t){}},{key:"init",value:function(e){var t=this;if(window._esRouteMode="state",e&&e instanceof Array){e.forEach(function(e){if(!(e.path&&e.controller&&t.utils.isFunction(e.controller)))return console.error("need path or controller"),!1;t.route(e.path,e.controller)});var r=document.querySelector("#root");this.rootDom=r||null}else console.error("no routes exit")}},{key:"route",value:function(e,t){this.routes[e]=t||function(){}}},{key:"refresh",value:function(){var e=this;if(window._esRouteObject&&this.watcher||(window._esRouteObject={path:location.pathname||"/",query:{},params:{}},this.watcher=new o(window,"_esRouteObject",function(t,r){e.refresh()})),this.currentUrl=window._esRouteObject.path||"/",this.routes[this.currentUrl]){window.routerController&&(window.routerController.$onDestory&&window.routerController.$onDestory(),delete window.routerController);var t=new this.routes[this.currentUrl];window.routerController=t,t.$beforeInit&&t.$beforeInit(),t.$onInit&&t.$onInit(),this.renderController(t).then(function(){e.$routeChange(e.lastRoute,e.currentUrl),e.lastRoute=e.currentUrl}).catch(function(){console.error("route change failed")})}}},{key:"renderController",value:function(e){var t=e.declareTemplate;return t&&"string"==typeof t&&this.rootDom?(e.$beforeMount&&e.$beforeMount(),this.replaceDom(e).then(function(){e.$afterMount&&e.$afterMount()}),Promise.resolve()):(console.error("renderController failed: template or rootDom is not exit"),Promise.reject())}},{key:"replaceDom",value:function(e){return e.$render&&e.$render(),Promise.resolve()}}]),n}(),i=function(){function n(){var e=this;t(this,n),this.routes={},this.currentUrl="",this.lastRoute=null,this.rootDom=null,this.utils=new r,window.addEventListener("load",this.refresh.bind(this),!1),window.addEventListener("hashchange",this.refresh.bind(this),!1),window.addEventListener("popstate",function(t){window._esRouteObject={path:location.hash.split("?")[0].slice(1)||"/",query:{},params:{}},e.refresh()},!1)}return e(n,[{key:"$routeChange",value:function(e,t){}},{key:"init",value:function(e){var t=this;if(window._esRouteMode="hash",e&&e instanceof Array){e.forEach(function(e){if(!(e.path&&e.controller&&t.utils.isFunction(e.controller)))return console.error("need path or controller"),!1;t.route(e.path,e.controller)});var r=document.querySelector("#root");this.rootDom=r||null}else console.error("no routes exit")}},{key:"route",value:function(e,t){this.routes[e]=t||function(){}}},{key:"refresh",value:function(){var e=this;if(window._esRouteObject&&this.watcher||(window._esRouteObject={path:location.hash.split("?")[0].slice(1)||"/",query:{},params:{}},this.watcher=new o(window,"_esRouteObject",function(t,r){e.refresh()})),this.currentUrl=window._esRouteObject.path||"/",this.routes[this.currentUrl]){window.routerController&&(window.routerController.$onDestory&&window.routerController.$onDestory(),delete window.routerController);var t=new this.routes[this.currentUrl];window.routerController=t,t.$beforeInit&&t.$beforeInit(),t.$onInit&&t.$onInit(),this.renderController(t).then(function(){e.$routeChange(e.lastRoute,e.currentUrl),e.lastRoute=e.currentUrl}).catch(function(){console.error("route change failed")})}}},{key:"renderController",value:function(e){var t=e.declareTemplate;return t&&"string"==typeof t&&this.rootDom?(e.$beforeMount&&e.$beforeMount(),this.replaceDom(e).then(function(){e.$afterMount&&e.$afterMount()}),Promise.resolve()):(console.error("renderController failed: template or rootDom is not exit"),Promise.reject())}},{key:"replaceDom",value:function(e){return e.$render&&e.$render(),Promise.resolve()}}]),n}();module.exports={Router:n,RouterHash:i};
},{"./Utils":2,"./KeyWatcher":5}],1:[function(require,module,exports) {
var e=require("./Utils"),r=require("./Lifecycle"),o=require("./Watcher"),t=require("./KeyWatcher"),u=require("./Compile"),i=require("./Component"),l=require("./Controller"),q=require("./Router").Router,c=require("./Router").RouterHash;module.exports={Utils:e,Lifecycle:r,Watcher:o,KeyWatcher:t,Compile:u,Component:i,Controller:l,Router:q,RouterHash:c};
},{"./Utils":2,"./Lifecycle":3,"./Watcher":4,"./KeyWatcher":5,"./Compile":7,"./Component":6,"./Controller":8,"./Router":9}]},{},[1], null)
//# sourceMappingURL=/index.map