{"version":3,"sources":["Utils.js","Lifecycle.js","Watcher.js","Compile.js","Component.js","Controller.js","Router.js","index.js"],"names":["Utils","toString","Object","prototype","name","parts","window","location","search","replace","split","params","i","len","length","pairs","func","call","a","b","aStack","bStack","type","deepIsEqual","className","areArrays","aCtor","constructor","bCtor","isFunction","push","isEqual","keys","key","hasOwnProperty","pop","value","setdate","console","error","mydate","Date","setDate","getDate","document","cookie","cookieArray","cookieName","setCookie","module","exports","require","Lifecycle","declareTemplate","state","utils","oldData","newData","newState","_newState","Watcher","data","watcher","updater","render","watchData","vm","val","defineProperty","configurable","enumerable","get","set","newVal","CompileUtilForRepeat","exp","valueList","forEach","v","node","dir","index","indexOf","_getVMRepeatVal","_getVMVal","watchValue","text","updaterFn","textContent","reg","test","RegExp","$1","textUpdater","innerHTML","oldValue","space","String","event","eventType","fnList","fn","f","addEventListener","bind","CompileUtil","fragment","$fragment","vlList","k","isRepeatNode","props","expFather","newElement","cloneNode","nodeAttrs","attributes","Array","from","attrName","attr","isDirective","substring","isEventDirective","eventHandler","appendChild","nodeType","result","Compile","el","$vm","$el","isElementNode","querySelector","node2Fragment","init","compileElement","elementCreated","createElement","childNodes","compile","compileText","createDocumentFragment","child","firstChild","Component","declareTemplateName","preProps","fatherController","routerController","declareComponents","$initProps","propsWatcher","$watchState","$updateProps","$reRender","stateWatcher","controllerStateKey","dom","getElementById","hasChildNodes","childs","removeChild","item","$hasRender","$onDestory","newProps","_newProps","Controller","componentName","declareComponent","propsKey","$beforeInit","$onInit","domReg","$beforeMount","$mountComponent","$render","$afterMount","Router","routes","currentUrl","lastRoute","rootDom","refresh","nextRoute","arr","route","path","controller","hash","slice","renderController","then","$routeChange","catch","template","replaceDom","Promise","resolve","reject"],"mappings":";;;;;;;ACAA,IAAMA,ADAAA,QCAQmD,QAAQ,SAAR,CAAd;ADCE,mBAAc;AAAA,ICCVC;AACJ,uBAAc;AAAA,ADDZ,AEFJ,ICAMsB,ADAA1E,KFEGC,GEFKkD,KFEV,GAAgBjD,AEFE,OFEKC,EEFb,CAAd,MFEoB,CAAiBF,QAAjC;AACD;ACCC,ICFE2D,KDEGP,eAAL,GAAuB,EAAvB;AACA,ACFF,SDEOC,KAAL,GAAa,EAAb,ACFUO,IAAZ,EAAkBC,OAAlB,EAA2BC,OAA3B,EAAoCC,MAApC,EAA4C;ADG1C,ACH0C,AKH9C,IAAMhE,KNMGuD,GMNKJ,ENMV,GAAa,GMNK,CNMDnD,KAAJ,EAAb,CMNU,CAAd;ANOG,AMNH,IAAMoD,YAAYD,QAAQ,KPIf/C,MAAM,EOJC,CAAlB;AHDA,AEAA,ANMI,AEFA,AKFJ,IHFMgD,AEAApD,ACEA4D,KLEGC,CFEDxD,EMNM8C,CJIV,CKFYA,EHFEA,AFIFU,EFEAvD,EMNM,AJIlB,EKFoB,EHFE,CJMHC,IMNT,CAAd,GNMgB,AOJA,CPIgBC,AOJhC,GHFkB,CAAlB,EJMgB,CAAuBC,OAAvB,CAA+B,GAA/B,EAAoC,EAApC,EAAwCC,KAAxC,CAA8C,GAA9C,CAAZ;AILJ,AJMI,AEFA,AKFJ,IHFMsH,AGEAA,KLEGlE,CFEDnD,IINQwC,AGEAA,ELEZ,GFEa,AEFEW,EFEf,CINoB,AGEA,ILEpB,ICJQI,GCAI,AGEA,CJFAS,ACAhB,AGEA,KJFqB;AACjB,ACAJ,ACFA,ALQI,AEFA,AKFJ,IHFMf,ACFAR,ACEA+H,ACEAlC,KLEGlF,CCJCa,CHMD,GINOzB,CJMHvC,CKRKuC,AHMd,AKFcA,GPID,AEFEY,CFEV,EGNaY,ACAE,AJMJ9D,EKRM,AEIA,EJFAJ,ADItB,EFEsBJ,KGNJ,ACAN,CDAkB,ACAlC,AJMgCS,GKRd,AEIA,CJFI,AEFtB,AEIA,EJFwC,AHMpC,EGNkB,AHMkBF,EGNIF,EHMAG,GGNtB,AHMlB,CGN8C,CHMDD,EGN3B,CAAlB,AHMA,EAAkD;AGLlD,AEFJ,ACEE,ANMI,AEFF,AKFJ,IFJMgD,AEIA4G,KLEGxG,CCJD5B,EHMErB,EKRMoC,CHMZ,EKFeA,CJFHe,ADIEF,ECJd,AGAY,ANME3D,EKRM,EHMpB,CKFuB,CPIHO,CAAN,EAASF,CCAf,CAAE,EIRE,CAAhB,ALQkB,CAAe,GAAf,CAAZ,AOJa,CAAnB;AJDIkE,AEFJ,ACCgB,ANOVjE,AEFF,AKFJ,IHFMsI,ACFAjB,AEIAmD,KLEGlH,IKFMd,CFJCA,CLQHpC,CGNC8D,EDIV,CAAe,EFEA,AOJI,CFJC,ALQX,CGNT,AHME,CGNgB,ADIEhB,GFEC9C,CEFrB,GKFW,CAAf,CFJgB,ALQe,CKR/B,ALQyB,CAAnB,EGNqB;AACrB,AHMD,AEFD,SAAKwC,GCJCuB,EDIN,GAAa,CCJD,GDIK9E,GCJf,EAAkB,ADIP,EAAb;ACHEoC,AGFF,ANQA,AEFD,AKFHa,IFJMuH,GEICtH,EDJEkI,CNQDzK,IOJR,CDJI,CHEUyB,CHMChC,AOJE,CDJC,EAAd,CNQI,CGNY0E,AHMhB,CGNU,CAAR,AHMgB,WCDL,CAAE;AEJd,ACFH,AEAE,ANQE,AOJJ9E,OJLE,EGCKqL,KCGQ,CPKJ1K,IMRT,EFAUuI,CEAQ,ANQF9I,EMRhB,ENQS,CAAP,aIRJ,EAAiC2G,KAAjC,EAAwC;ADGtC,ACHsC,AECtC,ANQC,AOJH3D,OPEE,EMNKkI,IHEElJ,AHMA,KGNP,AGFA,GAAiB,CCEJ,GDFb;AHGD,AEJD,ACEE,ANQE,AOJJwB,SDJO2H,MNQI,CMRT,CNQE,COPW,CDDE,IAAf,CDFY,UJQA,CAAE;AGRwB,ACA1B,ACGZ,ANQC,AOJHvD,SDJOzE,KAAL,GAAa,CCAA,GDAIvD,KAAJ,EAAb,EJIQ6D,MAAM;AIHdvD,ANQD,AEJC,AKAF2I,ULAM,CIJG1C,AJIF1C,IAAD,IAAS,GKLA,KDCb,AJIoBA,CIJI,GJIX,GIJb,EAAgC,KAAK2H,OAAL,CAAahF,IAAb,CAAkB,IAAlB,CAAhC,EAAyD,KAAzD,MJIoB3C,IAAP,OAAgB,QAA7B,EAAuC;AENvC,ACFY,ACKZvD,AJIA,AKAFkK,UHPOtB,AFOChF,CIJCqC,IJII,IAAX,KKNa,GDEb,CAAwB,CFHxB,GAA2B2C,CHQhB,CAAE,EEJC/E,IGDd,CHCmBQ,CGDmB,IHCd1C,CGDmBuJ,IHCd,ACJ7B,GEGsC,CAAahF,IAAb,CAAkB,IAAlB,CAAtC,EAA+D,KAA/D;AHEA,ACJA,AEGD,ACID2E,QHPMpE,EDIA3E,GCJJ,EAAW,SDIX;AACA,ACJE,ACFF,AHKc,AKJD,CAAjB,SJKUwC,AENDvB,EDEE8F,QAAL,EDIgBxE,CCJAoC,ECFlB,CFMsBtG,ECJpB,ACFqB,EAAvB,CLYSO,EGNS,ADETiB,CCFqB,EDDhB,CFOC,CGNG,EAAkB,EAAlB,EAAsBvB,KAAtB,CAA4B,GAA5B,CAAlB;AACAkE,ACJE,ACFF,ALYA,AEJE,UGRGtB,EDEEyD,AFMD5C,CFIC,EKZP,CFMUU,CCJR,CCFW,ALYD5E,AEJA4D,EENG,ACFf,EDEE,CDIF,ADEiB5B,CCFC,EHMX,AEJK,CFIShB,AEJnB,IFIK,CAAmBD,CCHf,CAAE,EDGN,CGNgB,KHMa,mBAApC;AGLE,ACJD,ACFD,ALYD,AEJGkD,UGRGoF,CHQArF,CCFCa,MAAM7C,EDEV,CCFA,ADEakC,ECFE,CDEf,GGRF,GAAyB,EAAzB;AFOI/B,ACJJ,ACPY,AHaVlC,UENGmD,KFMIe,GCFGD,GAAR,ICJJ,GAAuB,CFMrB,CENF,AFMwBN,GILbyH,CJKT,EAA4BrJ,GAA5B,EAAiC,GILbwJ,WAAW,CAAE;AHI/B,ACJJ,ACHD,AHSKpH,UENCf,KAAL,GAAa,EAAb,IFMkB,IADiB,IDCzBE,SAASC,SAAS,CAAE;AED3B,ACJH,AFMIa,UENC8E,YFMW,IENhB,CFImC,CFK7BlI,CITkB,EAAxB,AJSSC,GAAGC,QAAQC,QAAQ;AGJ1Be,ACJF,AJSA,AEHImC,aAH+B,GCCzBnC,MAAM0C,CAAN,CAAR,CGJC4G,KAAK,AJME;ACDT,ACfqC,AEU9B,ANUR,AEHM,OCRN,GHWIxK,MAAMC,CAAV,EAAa,AEHAgD,GAAP,IFGcjD,GCJbwC,GDImB,CAAN,IAAW,ECJd,EDIkBxC,CAAJ,KAAU,IAAIC,CAAhC;AGJb,ACLD,AHMC,ADIA,AEHK,UDDDuC,CCJ+B,ECG5BtB,KAAP,IFCgB,KAAKmB,KAAL,CAAW1B,CIVf,SJUI,CAAsB6B,QAAtB,CAAhB,EAAiD;AEAlD,AETC,AJUE,AKPF,ANWA,AEHIc,UIRAkH,ANWAxK,CKdC0I,CJUGjG,CCL2B,EFS1B,EMXE+H,ENWP,IKdJ,ALciBvK,CCJGuC,EIVA,ELcE,AEHde,EGXgBb,ECGEyD,ANW1B,ECJE,ADI0B,AETO,EAMnB,CGXI,ACGpB,CDHgC,CCGC,ENWE,EKdE/D,GLcT,EKdR,EAAwB,KAAKmG,WAAL,CAAiBjD,IAAjB,CAAsB,IAAtB,CAAxB,EAAqD,KAAKkD,YAAL,CAAkBlD,IAAlB,CAAuB,IAAvB,CAArD,EAAmF,KAAKmD,SAAL,CAAenD,IAAf,CAAoB,IAApB,CAAnF,CAApB;AACD,AJUG,AKPAkF,ANWF,AEHM,YDDA/H,AKPAkB,IJQIX,GIRR,AJQWX,CIRC,IJQJ,CDDSI,ACCA5B,OAAT,CAAiB0C,IIRJ,EJQb,EAAyBN,GAAzB,CAAJ,CDDkCjE,CCCC,KDDvC,EAA8C;AAC5C,AKPA,ANWJ,AEHM,UFGFgB,IMXIyK,CLOC,CDICzK,AEHEsC,CFGZ,ECJavB,ADIA,CMXC2J,ELOV,EKPI,ELOYjI,ADIAxC,AEHE,EIRAwK,AJQhB,IFGoBxK,CAAb,CMXe0K,CLOxB,EAA2B,OKPvB,IAAkC,MAAKtI,KAAL,CAAW1B,UAAX,CAAsB8J,MAAME,UAA5B,CAAtC,EAA+E;ALQ7E,AKPA,ANWN,AEHMrI,gBDDI,EKPCmI,EJQG1J,CDDCqB,EKPT,AJQA,CIRWqI,CHKd5G,CFEO,CAAW9C,ACCAkC,GDDX,AKPayH,AJQjB,CCHGzH,ACNAgF,GECH,CLOuB,CEFflH,AGLe0J,ILOKrI,CEFf0B,ACNA,CECgB6G,GLON,CEFLlH,AFEgB1C,GAAX,EEFAgD,CGLvB,GLO2CtB,GEFbO,IAAID,GFEmBhC,GAAV,CAA3C,EAA2D,EEFd,GFEmBqB,KAAL,CAAWrB,GAAX,IAAkB0B,UAAU1B,GAAV,CAAlB;AEDjE,ACNA,AHQK,AKPA,ANWL,AEHM,UCHFG,ACNA+G,AJYA7H,CMbA,KJUQmC,CIRD,CFDX,EAAc,IDMd,AHMkBvC,CAAd,CEHkB,EAAhB,KGZKe,KAAKwC,QAAQ,oBLeNvD,CAAd,CAAJ;AGLA,ACNE,ACHF,AJWG,AKPGoB,ANWN,AEHMmB,UCHFkB,AHMArD,CKfC,EDGE6H,CDMCjE,CETCuF,ILeI,CMXClI,AJQAN,CCHV,ACNF,CDMcA,CDGV,CETYkH,CDMd,AGLE,CAAc,CJQC1E,CGZrB,CLeI,EGNqB,CAArB,ACNF,ACHwB,CLeCnD,AEHrB,GCHwBqD,CETC2E,GFSGpE,EHME,KGNN,CAAejD,EHMzC,CGN0B,AGLxB,GDJN,ALegD,EKfE,MLeKd,CGNE,AHMT,CGNhD,EAA4D,sCHMLA,CAAP,OAAa,QAA7D,EAAuE,OAAO,KAAP;AGLrEiB,ACNA,ACHA,AJWD,AKPK,ANWN,AEHM+B,YGZEuG,CDGD3D,GDMG,ECNR,AFSUtC,CIRC,EHKEU,ACNA,EAAb,CECI,AJQA,OGZqB,KFSjB,AETsBmE,CFSDnF,GAArB,EAA0BQ,GAA1B,EAA+B1C,GAA/B,CAAR,EETyB,CAAuBwI,aAAvB,CAAzB;AFUD,ACNC,ACHA,AJWF,AKPK,ANWL,AEHMvG,OCLN,GFIIR,EIXEiH,CFSC,ACNAvB,AJYA,EEHEnF,GFGG1C,ICJImC,CIXC,CHYX,CAAaS,EGZjB,CHYI,CETJ,AJYK,CAAiBjD,CAAjB,CIZmBZ,CJYCa,CAApB,EAAuBC,GIZGiI,GHQGnJ,ADI7B,EAA+BmB,ICJtC,EAA4C,ADIrC,CAAP,IIZ0B,CAAwBiI,iBAAxB,CAA0C,KAAKJ,mBAA/C,EAAoEC,QAA5F;ADOA/G,ACNA,ACHA,AJWA,AKPC,ANWJ,AEHO,SIfJ,IFMK,ACHA,AJWA,GEFG,ADGA8B,CETCjC,ACHA7B,AJWA6B,ECCE6B,CETX,CDMasB,AETb,AJWA,GGRgB,CCHCsF,AJWDhH,CCCZ,EAAgBQ,CETCkF,CDMb,CAAelF,ADGAJ,ECHf,AFER,EEF2Ba,AFED,GEFlB,ADGY,CCHpB,ADG+BnB,GGZG2F,GDGlC,CFSoB,CETmB,CFSC1F,EGZxC,EAA4C,GHYxB;ACFrB,ACNG,ACHA,AJWA,AKPF,AJQI,YIRE8H,EFDA,ACHAb,AJWA,ECCExG,GDDGZ,ACCAS,EETE,CECGnB,ELOV,CAAWX,CGRCkH,AFSd,EAAgBjF,CDDd,EIXiBiF,ACIEd,AJQFtE,GETV,AHQY,CGRE9B,GAAd,AFSO,CETd,ACHA,AJWwBqB,ACCCrB,CGZC7B,EHYZ,EETgB,ACH9B,AJWmB,AKPT,AJQoBqE,CDDAxC,AKPG,ILOd,CIXiBA,AHYtB,EETlB,AECc,CDJd,ACIF,CFD8C,CCHC,AJWFyB,IGRMqD,KAAL,AHQQ9E,CGRGA,GAAX,AHQD,CAA3C,EAA0D,CGRI3B,IHQCgD,GGRM+F,EHQX,CAAWpH,IAAX,IAAkByB,KGRd,CAAwBJ,GHQDrB,EGRvB,CAA8B,CHQhB,CAAlB,GGRuCmH,gBAAL,CAAsBnH,GAAtB,CAA9B,CAAlB;ADOhD,ACNI,ACHE0I,AJWH,AKPD,AJQI,UCHAtF,GGLCkG,CFDC,EFSErH,GETGX,AFSAS,CIRX,GHKiB,AETF5D,ACIAmL,CFDT,CAAW1J,AFSb,EGZA,AHYeqC,CCHGkB,EDGApB,IIRI,CFDpB,CAAsB,AFST,CCHF,CAAeE,AGLhC,EHKiB,CCNgBiF,CDMGlF,OCNR,CAAchC,CDMzB,CAAnB,CCN8B,CAAtB,CAAJ,EAA+C,KAAK8E,KAAL,CAAW9E,GAAX,IAAkB,KAAKkH,QAAL,CAAclH,GAAd,CAAlB;ADOnD,ACNG,ACHE,AJWJ,AKPA,AJQI,OInBL,MAWO,mBNUGf,GAAGC,GAAGC,QAAQC,QAAQ;AGJhC,ACNC,ACHE,AJWJ,AKPGiB,ANUF,AEpBmC,SAAjC,OIUQC,KAAR,CAAc,gBAAd;AHMF,ACND,ACHG,ACID,ANUD,AE3Bc,UF2BVf,CGLC8D,CETCqF,GFSN,CAAU5F,IAAV,EAAgBZ,AHKA,EKdEM,CFSlB,EAAqBxC,AHKAhC,GGLrB,EAA0BiE,EAA1B,CET6BwG,ALcb,CAAczJ,IAAd,CAAmBC,CAAnB,CAAhB,SKd8C6F,KAAjB,CAAuB4D,QAAvB,CAA3B,EAA6DD,iBAAiB3D,KAAjB,CAAuB4D,QAAvB,IAAmClG,MAAnC;AFU/D,AETC,ACIF,ANUC,UGLMc,AHKF/D,YGLc,EHKA,GGLQwD,EHKH/E,CGLL,OHKA,CAAcgB,IAAd,CGLlB,AHKqCE,CAAnB,CAAlB,EAAyC,OAAO,KAAP;AGJzC,AETD,ALcC,AE1BA,WAAK,GCqBG6D,AHKAxD,CE1BCS,ECqBT,CDrBA,IAAgB4B,CF0BhB,GE1BA,EAAsB;ACsBtB,AHKA,AE3BsB,aF2BjB,CE3BI5B,GAAa,aF2BtB,IIZY;ADQZ,ACPA,AJYA,AENC,UENG,GJYC,EIZIkH,QAAT,EAAmB,CECfyC,INWJ,EMXUC,YAAY;AHOtB,ACPE,AHMN5I,AKLI,ANWE,AENH,ODAIC,IKLEkI,EFDE7B,CHMX,GAAiBnG,AKLb,ANWS,CMXGwI,IAAZ,ANWY1K,CIZV,AJYO,CIZS,EHMtB,AKLwB2K,GFDG1C,IJYAhI,CAArB,GIZA,CCHc,ECIkB,YAAY,CAAE,CAAhD;AHOA,ACPE,ACJc,ACKjB,ANWC,aIZOqI,AJYF,YIZH,GAAoB,EJYtB,EIZ0B5F,OAAJ,CAAY,KAAKmD,KAAjB,EAAwB,KAAK0C,WAAL,CAAiBjD,IAAjB,CAAsB,IAAtB,CAAxB,EAAqD,KAAKkD,YAAL,CAAkBlD,IAAlB,CAAuB,IAAvB,CAArD,EAAmF,KAAKmD,SAAL,CAAenD,IAAf,CAAoB,IAApB,CAAnF,CAApB;ADQAjB,ACPD,AJYC,cAAI,CAACrE,CAAD,KAAO,CAACA,CGLCqE,AHKb,EAAe,OAAO,CGLCtE,AHKAE,CAAD,GGLT,CAAe,CHKC,CAACA,CAAf,CGLF,EAAqB4D,IAArB,EAA2B3C,KAA3B,CAAb;AALF,ACDA,ACNgB,ALkBd,WIZGwH,MJYI,CAAC1I,CAAD,IIZT,CJYgB,CAAP,CIZW,EJYA,EIZI0C,EJYA,CKjBf3B,ALiBgBf,CAAL,EKlBJ,CDMI,CAAY,CJYD,IIZMoC,AJYFnC,CAA1B,GAA8B,CIZnB,AJYoBD,CAAD,CIZK,IJYE,CIZGuI,AJYFtI,CAA7C,UIZ0C,CAAiBqF,IAAjB,CAAsB,IAAtB,CAAxB,EAAqD,IAArD,EAA2D,KAAKmD,SAAL,CAAenD,IAAf,CAAoB,IAApB,CAA3D,CAApB;ADQD,ACPA,ACLG,ALiBF,YKjBM,CLiBD,MKjBM8C,SLiBX,EMZQ,MDLF,CAAuBrH,GAAvB,EAA4B2I,WAAhC,EAA6C,OAAKtB,iBAAL,CAAuBrH,GAAvB,EAA4B2I,WAA5B;AAC7C,ACIM,ANaR,YKjBM,CLiBD,MKjBMtB,YLiBX,KKjBM,CAAuBrH,GAAvB,EAA4B4I,OAAhC,EAAyC,OAAKvB,iBAAL,CAAuBrH,GAAvB,EAA4B4I,OAA5B;AACzC,ALiBA,AETN5H,OAAOC,KGRK4H,EHQZ,GFSa,AETIlH,CFSH1C,CAAD,EKjBQ,GLiBD,AETpB,CGRyByE,ALiBJxE,CAAf,KKjBe,UAAmBc,GAAnB,YAAgC,GAAhC,CAAf;AACA,ACGF,ANIA,WMJKoJ,IDHEhI,MCGP,GAAkB9C,CHQfwE,KEXD,CFWOZ,ECPElC,ACJc,ACGE6J,GHQb7J,CGRI,CFCFwC,AEDgBsH,EDHF1I,CFWXa,EGRD,CAAoB,CHQf,AGRL,CFCM,IEDoB,GAA5C,EDHyB,CAAqBzD,OAArB,CAA6BqK,MAA7B,EAAqC;AFY9D,ACPA,ACL8D,ACI9D,UHQMxF,ACPAuE,AEDF,KAAKuB,EHQIrG,IGRT,CHQcS,AGRF,KAAK6F,IFCM,EDO3B,GCPgClC,CED5B,CAAJ,EAAkC,CDJ+DlH,GDKtE,ACLmC,CDKrBA,GAAd,CAA3B;ADQA,ACPA3B,ACN8D,ACK5D,ANcF,SKnByB,CFanBmF,AEbJ,ALmBEhE,EMdEnB,CFCC+I,GDOK,GGRCA,GNcG7H,OIbhB,CAAwB8B,CDOxB,ICPA,AEDE,CFC4BuG,AJaA,CMdC,eNc/B,EIbA,IAAoDpF,MAApD;ADQA,ACPD,ACNG,ACKE,ANcJ,UGNIgB,EEbE,EFaEC,AGRApF,IHQJ,CAASgF,AEbFgE,ECKID,EHQX,CAAJ,EAAoB,UEbd,CAAuBpH,ACKrB,CAAwBoI,EDL1B,EAA4BU,MCK9B,EAAwCzK,IDL1C,EAA8C,CCKG+I,MDLEC,UCKT,CAAwBe,MDLpB,CAAuBpI,GAAvB,ACKJ,EDLgC8I,YAA5B;AFc9C,AEpBc,ACYZ,ANcJ,UAAI,CAACtJ,CGNGkD,KGRGrE,CHQGqF,EHMd,EAAgB,EMdE0D,CHQGzD,EAAnB,aGRE;AHSF,AGRC,ANcD,YGNIxD,cAAJ;AACA,AErBF,ACaE,ANcA,WK3BG,CFqBCuC,AGREkH,ANcF,GK3BG5J,CFqBCiD,EErBV,EL2BahE,CAAP,CK3BU,CFqBV,CAAYe,CGRG,EHQf,AErBeqH,ECaI,CFAjB,GDQmB,CAArB,AGRwB8B,IHQEzG,EGRP,CAAY,CHQDO,EErBpC,EAAwC,ACaEmG,GHQV,CAAepJ,GAAf,GGRP,CAAJ,EAAnB,GNcWf,CAAP,EGNqD,CAAzD,EAA4D,EHM3C,QAAb,IAAyB,QAAOC,CAAP,yCAAOA,CAAP,OAAa,QAA1C,EAAoD,OAAO,KAAP;AGLlDiB,ACRJ,ACdwC,ACctC9B,ANcA,UIdIwJ,EJcApI,EK5BGO,CCcAoH,CFAGzG,CCd4B,CFsB5B,EHME1B,EAAES,CGNCwD,ECRI4E,MEAnB,ENcA,CMd0B8B,IHQhB,CAAqB1H,ACRrB,GDQA,EAA0BQ,AGRpC,GHQU,EAA+B1C,GAA/B,CAAR,ECR6C,KAAKiH,mBAA1C,CAAZ;ADSG,ACRH,ACTC,ACSC,ANcA,SGRA,CCNEY,EEAE+B,ANcAjK,GGNG,ECREkI,GJcG3I,CIdC6I,CJcCrI,CMdCiJ,UNcf,CIdS,AEAT,EFAF,AEA8BiB,EFAE,SEASjB,WAAX;AHS1BxI,ACRF,ACTH,ACSG,ANcA,YIdI6H,AEAA4B,MHQM,GCRG/B,EDQE1E,AGRAyF,EFAElC,KEAjB,EHQU,AGRckD,CHQC3H,EAAf,ACRV,EDQ6BS,GAAnB,CAAR,EGRiCkG,OAAX;AHSvB,ACRD,AEAA,ANcA,YAAInJ,CIdC,AEAAsK,IFAIpL,IAAIqJ,CJcCrI,KAAV,CIdgBd,CEApB,CAAsB+K,CNcC,EAAE,CIdZ,GAAgB,CAA7B,AJc8BhK,EIdEjB,AEAhC,EAAkCqL,GFAG,CAArC,AEAA,CAAuC,CFACrL,AJcf,CAAgBc,EIdzC,EAA6C,CJcpB,KMdoB,ANcMA,iBAAiBA,KAA3C,IAAoD,KAAKG,UAAL,CAAgBD,KAAhB,CAApD,IAA8EA,iBAAiBA,KAAjG,CAAnB,IAA+H,iBAAiBV,CAAjB,IAAsB,iBAAiBC,CAA1K,EAA8K;AGL9K,ACRE2I,AEAA,ANcA,aGNGjE,CCRCqE,GEACgC,ANcE,KAAP,EGNF,CAAiBnH,ACRf,CAAgBkF,GDQlB,AGRE,CAAkB,CHQG7H,ECRE+H,GDQzB,CCRkB,AEAOmB,CFAK1K,CAAZ,CAAhB,MEAA,EAAkC,OAAKyK,UAAvC;AHSH,ACRE,AEAC,ANcD,iBMdMC,SAAL,GAAiB,CDVb,MCUkBD,UAAtB;AHSL,ACRE,ACVD,ACUG,ANcF,SMjBC,CDPIvB,CCUDqC,KDVOvJ,ACOV,CAGS,QDVUmH,ICUJ,UDVL,CAAwB,MAAxB,CAAZ;ADWA,ACVA,ACUIzH,UDVAwH,CDUClB,GCVGoB,IDUR,AEAYzH,GFAG,EEAX,CAAc,CFACyF,ECVf,EAAJ,EAAyB,CDUV,aEAX,IFAqC,KAAKkB,mBAA/B,EAAsD,IAAtD,CAAf;AACA,ACVE,ACUC,ANcH9H,SMnBE,CFKE,ECVE6I,GDUGG,AJcAhJ,MKxBM0I,IDUf,ACVmBnB,ALwBA,EIdE,AJcrB,KId0ByB,GCVxB,ODUmB;AACtB,ACVG,ACUD,ANcD/I,aKxBO,ELwBEA,EKxBET,IAAIqJ,ILwBI,EAAnB,CKxBsBnJ,IFiBZiE,EEjBK,GAAgB,CFiBf3C,AEjBd,EAAgCxB,KFiBX,AEjBgB,CAArC,EAAwCA,GAAxC,EAA6C;AFkB/CmE,AEjBI+E,ACUL,ANcC,UAAIhJ,CGPC0E,GEjBG0E,KLwBK9I,GGPb,GAAmB,AEjBf,CAAgB6I,ALwBAnJ,MGPMsB,AHO1B,CKxB2B+H,IFiBR,AEjBC,CAAYvJ,CAAZ,CAAhB,EFiBgC,WAAjB,GAA+B,EAA/B,GAAoCwB,KAAvD;AACD,AEjBI,ALwBH;AKvBC,ALwBD,aAAOtB,QAAP,EAAiB,SIfP;AACV,ACTA,ALwBE,UIfIgJ,CCTDkB,CLwBC5J,IIfMwB,GJeC9B,MIfQiJ,AJef,CKxBN,KLwByB7I,CAAvB,EAA0B,GMfb2K,EFAH,UEAe,MFAsB,KAAK3C,mBAA1C,CAAZ;AACA,ACTA,ACSA,ANeI,UIfAY,AEAEsC,CDTDxD,MDSMkB,AJeAzI,CKxBX,GDSe2I,ACTA,ACSE6B,GNeC/K,CKxBCkH,KLwBR,EGRDjD,AEhBK,ACSa1B,CDTD,CDShB,EAAX,AJe8BlC,CAA1B,CGRYiB,ACPgB,ECTjB,EAAqB,GFgBb,CEhBR,CAAf,ACSA;AHQA2C,ACPE,ACTF,ACSA,ANeG,UKxBC,ACSAqH,CHOCtG,CCPCmE,GCTGX,KFgBT,CCPeQ,CEAC,CHOC,ECPEnB,IEAIyD,CHOChK,EEhBxB,EAA4B,CFgBX,ACPf,EEAc,GHOkB,EGPE,QAAhC,CHOa,GAA+B,AGPA,EHO/B,GAAoCA,AGPAmJ,KHOrD,EGPA,EAA8D;AHQ/D,ACPG,ACTA,ACSA,ANeD,YMfKM,CFAC,ACTA,IDSIjL,ACTAqB,GAAT,CDSagI,EEAEc,CDTC,IDSIjK,CCTCwI,KDSR,CEAb,EFA6B,AEAAuC,CFA7B,EAAgCjL,KAAK,CAArC,ACTA,EDSwCA,ACTA,ACSAmK,GFAxC,EAA6C,OEAhB;AFC3BjB,ACTA,ACSF,ANeF1I,aMfOiL,ANeAvK,CIfCoI,ACTA,GLwBR,CAAYhJ,CKxBCoI,ALwBb,IMfE,CAAgBuC,CFAd,CAAgB5B,OAAOE,CEAzB,EDTM,ACSsB8B,CFAV,ACTWhK,CDSCrB,CAAZ,CAAhB,ACTI,ACSN,CAAiC,CDTCqK,OAAhC,EAAyC,ECSJ,GDTS3B,iBAAL,CAAuBrH,GAAvB,EAA4BgJ,OAA5B;ADU1C,ACTC,ACSA,ANeJ5J,aAAOS,CKxBC,ACSA+J,GNeR,CAAY1K,CKxBCmI,ALwBb,MMfmB4B,WDTX,ACSJ,CDT2BjJ,CCSC4J,EDTxB,EAA4BX,OCSOA,IDTvC,EAA6C,KAAK5B,ACStB,iBDTiB,CAAuBrH,GAAvB,EAA4BiJ,WAA5B;ADUhD,ACTE,ACSA,ANeH,SMjBE,wBHQSnG,MAAM3C,OAAO2D,UAAU;AAClC,ACNA,ACTC,ACSC,ANeF,UGTIvE,ACNA,AJeAC,KIfK4I,AEAAiC,INeT,EAAe,CGTCvH,CGNCwH,EFAjB,EDMqB/K,ACNA,GEAZ,EFAiB6I,AEAxB,IHMF,MCNqB;ADOrB7I,ACNA,ACTA,ACSC,ANeCV,OMrBF,GDHI,CDSC8H,EEAE,EDTEwB,ELwBElJ,CGTCM,ACNZ,CJeaV,EIfE,IAAIkH,ACTnB,ALwBE,EKxBmB,CFeCvH,ICNP,ACTW2J,GFed,CAAkBrE,MEfT,EFeT,EAA4B,EAA5B,CCN6B,CDMGtF,ICNEyI,GDMlC,CAAwC,KAAxC,EAA+C,EAA/C,CAAZ,KCNe,EAAsD,IAAtD,CAAf;ADOA,ACNA,ACTD,ACSG5G,ANeA,UGTI0D,ACNF,EJeElF,GIfGsJ,CEAC7H,EHMIf,GGNZ,CAAc,CNeCL,EIfjB,AJemBL,EIfE,IDMMmF,AHSzB,CIfwBmE,CJeC,KGTOhI,EHSA,EIfb,CDMM,CAAb,CHSa,EGTgB,GAA7B,GAAmC,EAAjD,yBGNE;AHOF2C,ACND,AEAG,ANeA,WGTGvD,IGNI8K,ANeAxL,KGTT,GAAiBU,AGNAgL,ANef,EAAiB,IMfV,EAAP,IHM2BxG,KAAZ,GAAoB5D,KAArC;AACD,AGNE,ANeG,cAAI,CAAC,KAAKL,OAAL,CAAab,EAAEJ,MAAF,CAAb,EAAwBK,EAAEL,MAAF,CAAxB,EAAmCM,MAAnC,EAA2CC,MAA3C,CAAL,EAAyD,OAAO,KAAP;AMd9D,ANeI,gCKzBO;AFiBZ,AEhBE,ALyBC,OAND,GKnBMyI,GLyBC,GKzBKlH,SAASmH,IDSdO,UAAU,ACTL,CAAwB,MAAxB,CAAZ;AFiBF,ACPE,ACTA,ALyBE,UIhBE,ACTAR,CDSC,CJgBC9H,EKzBEgI,EDSEb,GJgBGjJ,KIhBb,EAAoB,AJgBA8B,CKzBhB,EAAJ,CLyBa,CKzBY,ALyBAd,CAAZ,CAAX;AGRJ,ACPE,ACTE,ALyBA,UIhBEoJ,ECTEL,ALyBAhI,SKzBS6H,CDSC,EJgBd,CKzBiBnB,EDSEpF,IEAZsI,CFAO,CAAWhK,ECTzB,QDSc,AEAK,CFAiByI,QAAtB,CAAhB,EAAiD;ADQnD,ACPI,ACTA,ACSF,ANgBExJ,UMhBE+K,EFAItB,CCTD,IAAI3J,ALyBAoB,IKzBIiI,ACSAgB,CNgBCnK,EIhBIwJ,ICTExJ,ACStB,ANgBE,EMhBsB+K,IFAtB,ACTa,GAAgB,CAA7B,EAAgCjL,CCSCqK,IDTI,CAArC,EAAwCrK,ACSlB,GDTtB,EAA6C;AFiBjD,ACPI,ACTEkJ,ACSJ,ANgBE,YIhBIS,AJgBArK,CMhBCoM,CDTCpC,KLyBKlI,EMhBEuK,ENgBT,CAAYpL,CIhBCoJ,ACTf,ALyBE,CKzBcN,CLyBCnJ,CMhBd,EAAP,GDT2BqJ,ALyBrB,IKzBc,CAAYvJ,ALyBAE,CKzBZ,CAAhB,ILyBF,EIhBsCZ,AJgBA,MIhBtC,CJgB6C,CIhBC,IJgBR;AGR1C,ACPM,ACTD,ACSJ,ANgBG,eIhBO,AJgBAY,IIhBImB,GAAT,CJgBF,EAAiB,CIhBCsI,SAAhB,EAA2B;ADQjC,ACPQ,ACTJ,ALyBEtI,YKzBE,IDSI,AJgBAD,CKzBCqI,IDSItD,AJgBAjG,KIhBL,CAAWmB,ACTnB,ALyBQ,CAAN,CKzBmB,CDSb,ICTkBoI,CDSC,KAAKtD,ICTX,CDSM,CAAW9E,GAAX,MAAoBsI,UAAUtI,GAAV,CAA3C,EAA2D,KAAK8E,KAAL,CAAW9E,GAAX,IAAkBsI,UAAUtI,GAAV,CAAlB;ADQnE,ACPO,ACTJ,ALyBG,cAAI,EAAEd,EAAEe,cAAF,CAAiBD,GAAjB,KAAyB,KAAKF,OAAL,CAAab,EAAEe,GAAF,CAAb,EAAqBd,EAAEc,GAAF,CAArB,EAA6Bb,MAA7B,EAAqCC,MAArC,CAA3B,CAAJ,EAA8E,OAAO,KAAP;AGRpF,ACPK,ACTH,ALyBG,WKzBE2J,eAAL;AFiBF,ACPG,ACTD,ALyBC,WKzBIpC,OAAL,GAAe,IAAIZ,OAAJ,CAAY,OAAZ,EAAqB,IAArB,CAAf;AFiBF,ACPE,ACTA,ALyBA5G,UIhBIkJ,ACTA,GLyBGnI,EKzBEmH,CLyBT,MIhBgBgB,UCThB,EAA4B,QDSQpK,MAApC,EAA4C;ADQ9C,ACPI,ACTA,ACMN+C,ANmBI5B,OMnBG6B,MFGI,ACTA,ALyBAf,CMnBX,ENmBI,CIhBWF,ACTAA,ACMEkJ,GDNX,CDSA,EEHN,CDNsB,CDSAb,ICTKhB,IDSrB,EAA0B,WCT1B,EAAwC;AFiB5C,ACPM,ACTA,ALyBJ,aAAO,CIhBC,ACTA,GLyBR,EIhBavC,ACTAuC,KDSL,CAAWrH,IAAX,KAAmB,ECTnB,CAAuBA,EDSC8E,CCTxB,EAA4B4C,EDST,CAAW1H,IAAX,ECTvB,EAA2C,EDSAqI,GCTKhB,MDSIrH,IAAT,CAA3C,EAA0D,ICTf,CAAuBA,GAAvB,EAA4B0H,SAA5B;AFiBjD,ACPQ,ACTF,ALyBL,cKzBS,GDSG5C,ECTEuC,GDSP,CAAWrH,IAAX,IAAkBqI,KCThB,CAAuBrI,GDSEA,ACTzB,EAA4BiJ,EDSZ,CAAlB,QCTF,EAA6C,KAAK5B,iBAAL,CAAuBrH,GAAvB,EAA4BiJ,WAA5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","file":"index.map","sourceRoot":"../src","sourcesContent":["class Utils {\n  constructor() {\n    this.toString = Object.prototype.toString;\n  }\n\n  getQuery(name) {\n    let parts = window.location.search.replace('?', '').split('&');\n    let params = {};\n    for (let i = 0, len = parts.length; i < len; i++) {\n      let pairs = parts[i].split('=');\n      params[pairs[0]] = pairs[1];\n    }\n    if (params[name]) {\n      return params[name];\n    } else {\n      return '';\n    }\n  }\n\n  isFunction(func) {\n    return this.toString.call(func) === '[object Function]';\n  }\n\n  isEqual(a, b, aStack, bStack) {\n    // === 结果为 true 的区别出 +0 和 -0\n    if (a === b) return a !== 0 || 1 / a === 1 / b;\n    // typeof null 的结果为 object ，这里做判断，是为了让有 null 的情况尽早退出函数\n    if (a == null || b == null) return false;\n    // 判断 NaN\n    if (a !== a) return b !== b;\n    // 判断参数 a 类型，如果是基本类型，在这里可以直接返回 false\n    let type = typeof a;\n    if (type !== 'function' && type !== 'object' && typeof b !== 'object') return false;\n    // 更复杂的对象使用 deepEq 函数进行深度比较\n    return this.deepIsEqual(a, b, aStack, bStack);\n  }\n\n  deepIsEqual(a, b, aStack, bStack) {\n    // a 和 b 的内部属性 [[class]] 相同时 返回 true\n    let className = this.toString.call(a);\n    if (className !== this.toString.call(b)) return false;\n    switch (className) {\n    case '[object RegExp]':\n    case '[object String]':\n      return `${a}` === `${b}`;\n    case '[object Number]':\n      if (+a !== +a) return +b !== +b;\n      return +a === 0 ? 1 / +a === 1 / b : +a === +b;\n    case '[object Date]':\n    case '[object Boolean]':\n      return +a === +b;\n    }\n\n    let areArrays = className === '[object Array]';\n    // 不是数组\n    if (!areArrays) {\n      // 过滤掉两个函数的情况\n      if (typeof a !== 'object' || typeof b !== 'object') return false;\n      let aCtor = a.constructor;\n      let bCtor = b.constructor;\n      // aCtor 和 bCtor 必须都存在并且都不是 Object 构造函数的情况下，aCtor 不等于 bCtor， 那这两个对象就真的不相等啦\n      if (aCtor !== bCtor && !(this.isFunction(aCtor) && aCtor instanceof aCtor && this.isFunction(bCtor) && bCtor instanceof bCtor) && ('constructor' in a && 'constructor' in b)) {\n        return false;\n      }\n    }\n\n    aStack = aStack || [];\n    bStack = bStack || [];\n    let length = aStack.length;\n    // 检查是否有循环引用的部分\n    while (length--) {\n      if (aStack[length] === a) {\n        return bStack[length] === b;\n      }\n    }\n    aStack.push(a);\n    bStack.push(b);\n    // 数组判断\n    if (areArrays) {\n      length = a.length;\n      if (length !== b.length) return false;\n      while (length--) {\n        if (!this.isEqual(a[length], b[length], aStack, bStack)) return false;\n      }\n    } else {\n      let keys = Object.keys(a);\n      let key;\n      length = keys.length;\n      if (Object.keys(b).length !== length) return false;\n      while (length--) {\n        key = keys[length];\n        if (!(b.hasOwnProperty(key) && this.isEqual(a[key], b[key], aStack, bStack))) return false;\n      }\n    }\n    aStack.pop();\n    bStack.pop();\n    return true;\n  }\n\n  setCookie(key, value, setdate) {\n    if (!key || !value) {\n      console.error('set cookie error: key or value is null');\n      return;\n    }\n    let mydate = new Date();\n    mydate.setDate(mydate.getDate() + setdate);\n    document.cookie = `${key}=${value};expirse=${mydate}`;\n  }\n\n  getCookie(name) {\n    const cookieArray = document.cookie.split(';');\n    for (let i = 0; i < cookieArray.length; i++) {\n      let cookieName = cookieArray[i].split('=');\n      if (cookieName[0] === name) {\n        return cookieName[1];\n      }\n    }\n    return '';\n  }\n\n  removeCookie(name) {\n    this.setCookie(name, -1, -1);\n  }\n}\n\nmodule.exports = Utils;\n","const Utils = require('./Utils');\n\nclass Lifecycle {\n  constructor() {\n    this.declareTemplate = '';\n    this.state = {};\n    this.utils = new Utils();\n  }\n\n  $onInit() {}\n\n  $beforeMount() {}\n\n  $afterMount() {}\n\n  $onDestory() {}\n\n  $hasRender() {}\n\n  $watchState(oldData, newData) {}\n\n  setState(newState) {\n    if (newState && this.utils.isFunction(newState)) {\n      const _newState = newState();\n      if (_newState && _newState instanceof Object) {\n        for (var key in _newState) {\n          if (this.state[key] && this.state[key] !== _newState[key]) this.state[key] = _newState[key];\n        }\n      }\n    }\n    if (newState && newState instanceof Object) {\n      for (let key in newState) {\n        if (this.state[key] && this.state[key] !== newState[key]) this.state[key] = newState[key];\n      }\n    }\n  }\n}\n\nmodule.exports = Lifecycle;\n","const Utils = require('./Utils');\n\nclass Watcher {\n  constructor(data, watcher, updater, render) {\n    this.data = data;\n    this.watcher = watcher;\n    this.updater = updater;\n    this.render = render;\n    this.watchData(this.data);\n    this.utils = new Utils();\n  }\n\n  watchData(data) {\n    if (!data || typeof data !== 'object') return;\n    const vm = this;\n    for (let key in data) {\n      let val = data[key];\n      vm.watchData(val);\n      Object.defineProperty(data, key, {\n        configurable: true,\n        enumerable: false,\n        get() {\n          return val;\n        },\n        set(newVal) {\n          if (vm.utils.isEqual(newVal, val)) return;\n          const oldData = {};\n          oldData[key] = val;\n          const newData = {};\n          newData[key] = newVal;\n          val = newVal;\n          vm.watchData(val);\n          if (vm.watcher) vm.watcher(oldData, newData);\n          if (vm.updater) vm.updater(key, newVal);\n          if (vm.render) vm.render();\n        },\n      });\n    }\n  }\n}\n\nmodule.exports = Watcher;\n","class CompileUtilForRepeat {\n  _getVMVal(vm, exp) {\n    const valueList = exp.replace('()', '').split('.');\n    let value = vm;\n    valueList.forEach(v => {\n      if (v === 'this') return;\n      value = value[v];\n    });\n    return value;\n  }\n\n  _getVMRepeatVal(val, exp, key) {\n    let value;\n    const valueList = exp.replace('()', '').split('.');\n    valueList.forEach(v => {\n      if (v === key) {\n        value = val;\n        return;\n      }\n      value = value[v];\n    });\n    return value;\n  }\n\n  bind(node, val, key, dir, exp, index, vm, watchData) {\n    let value;\n    if (exp.indexOf(key) === 0 || exp.indexOf(`${key}.`) === 0) {\n      value = this._getVMRepeatVal(val, exp, key);\n    } else {\n      value = this._getVMVal(vm, exp);\n    }\n    const watchValue = this._getVMVal(vm, watchData);\n    // console.log('watchData', watchData);\n    // const watchDataName = watchData.split('.');\n    this.text(node, val, key, vm);\n    const updaterFn = this[`${dir}Updater`];\n    switch (dir) {\n    // case 'model':\n    //   updaterFn && updaterFn.call(this, node, value, exp, key, index, watchValue, watchData, vm);\n    //   break;\n    default:\n      updaterFn && updaterFn.call(this, node, value);\n    }\n  }\n\n  text(node, val, key, vm) {\n    const text = node.textContent;\n    const reg = /\\{\\{(.*)\\}\\}/g;\n    if (reg.test(text)) {\n      const exp = RegExp.$1;\n      let value;\n      if (exp.indexOf(key) === 0 || exp.indexOf(`${key}.`) === 0) {\n        value = this._getVMRepeatVal(val, exp, key);\n      } else {\n        value = this._getVMVal(vm, exp);\n      }\n      this.textUpdater(node, value);\n    }\n  }\n\n  textUpdater(node, value) {\n    node.textContent = typeof value === 'undefined' ? '' : value;\n  }\n\n  htmlUpdater(node, value) {\n    node.innerHTML = typeof value === 'undefined' ? '' : value;\n  }\n\n  classUpdater(node, value, oldValue) {\n    let className = node.className;\n    className = className.replace(oldValue, '').replace(/\\s$/, '');\n    const space = className && String(value) ? ' ' : '';\n    node.className = className + space + value;\n  }\n\n  // modelUpdater(node, value, exp, key, index, watchValue, watchData, vm) {\n  //   node.value = typeof value === 'undefined' ? '' : value;\n  //   const val = exp.replace(`${key}.`, '');\n  //   const valKey = watchData.replace(/(this.state.)|(this.props)/, '');\n  //   // console.log('valKey', valKey);\n  //   const fn = function () {\n  //     // console.log('exp', val);\n  //     const backup = [].concat(watchValue);\n  //     backup[index][exp] = node.value;\n  //     console.log('backup', backup);\n  //     // console.log('111', node.value);\n  //     // console.log('value', value);\n  //     // console.log('index', index);\n  //     // console.log('watchValue', watchValue);\n  //     // console.log('watchData', watchData);\n  //     // value = node.value;\n  //     console.log('vm.state[valKey]', vm.state[valKey]);\n  //     // if (/(this.state.).*/.test(watchData)) vm.state[valKey] = backup;\n  //     // if (/(this.props.).*/.test(watchData)) vm.props[valKey] = backup;\n  //   };\n  //   node.addEventListener('change', fn, false);\n  // }\n\n  eventHandler(node, vm, exp, event) {\n    const eventType = event.split(':')[1];\n    const fnList = exp.replace('()', '').split('.');\n    let fn = vm;\n    fnList.forEach(f => {\n      if (f === 'this') return;\n      fn = fn[f];\n    });\n    if (eventType && fn) node.addEventListener(eventType, fn.bind(vm), false);\n  }\n}\n\nclass CompileUtil {\n  constructor(fragment) {\n    this.$fragment = fragment;\n  }\n\n  _getVMVal(vm, exp) {\n    const valueList = exp.replace('()', '').split('.');\n    let value = vm;\n    valueList.forEach(v => {\n      if (v === 'this') return;\n      value = value[v];\n    });\n    return value;\n  }\n\n  _getVMRepeatVal(vm, exp) {\n    const vlList = exp.split(' ');\n    const value = this._getVMVal(vm, vlList[3]);\n    return value;\n  }\n\n  _setVMVal(vm, exp, value) {\n    var val = vm;\n    exp = exp.split('.');\n    exp.forEach((k, i) => {\n      if (i < exp.length - 1) {\n        val = val[k];\n      } else {\n        val[k] = value;\n      }\n    });\n  }\n\n  text(node, vm, exp) {\n    this.bind(node, vm, exp, 'text');\n  }\n\n  bind(node, vm, exp, dir) {\n    const updaterFn = this[`${dir}Updater`];\n    const isRepeatNode = this.isRepeatNode(node);\n    switch (dir) {\n    case 'model':\n      !isRepeatNode && updaterFn && updaterFn.call(this, node, this._getVMVal(vm, exp), exp, vm);\n      break;\n    case 'repeat':\n      isRepeatNode && updaterFn && updaterFn.call(this, node, this._getVMRepeatVal(vm, exp), exp, vm);\n      break;\n    default:\n      !isRepeatNode && updaterFn && updaterFn.call(this, node, this._getVMVal(vm, exp));\n    }\n  }\n\n  textUpdater(node, value) {\n    node.textContent = typeof value === 'undefined' ? '' : value;\n  }\n\n  htmlUpdater(node, value) {\n    node.innerHTML = typeof value === 'undefined' ? '' : value;\n  }\n\n  classUpdater(node, value, oldValue) {\n    let className = node.className;\n    className = className.replace(oldValue, '').replace(/\\s$/, '');\n    const space = className && String(value) ? ' ' : '';\n    node.className = className + space + value;\n  }\n\n  modelUpdater(node, value, exp, vm) {\n    node.value = typeof value === 'undefined' ? '' : value;\n    const val = exp.replace(/(this.state.)|(this.props)/, '');\n    const fn = function () {\n      if (/(this.state.).*/.test(exp)) vm.state[val] = node.value;\n      if (/(this.props.).*/.test(exp)) vm.props[val] = node.value;\n    };\n    node.addEventListener('change', fn, false);\n  }\n\n  repeatUpdater(node, value, expFather, vm) {\n    const key = expFather.split(' ')[1];\n    const watchData = expFather.split(' ')[3];\n    value.forEach((val, index) => {\n      const newElement = node.cloneNode(true);\n      const nodeAttrs = newElement.attributes;\n      if (nodeAttrs) {\n        Array.from(nodeAttrs).forEach(attr => {\n          const attrName = attr.name;\n          if (this.isDirective(attrName) && attrName !== 'es-repeat') {\n            const dir = attrName.substring(3);\n            const exp = attr.value;\n            if (this.isEventDirective(dir)) {\n              new CompileUtilForRepeat().eventHandler(newElement, vm, exp, dir);\n            } else {\n              new CompileUtilForRepeat().bind(newElement, val, key, dir, exp, index, vm, watchData);\n            }\n            // node.removeAttribute(attrName);\n          }\n        });\n      }\n      this.$fragment.appendChild(newElement);\n    });\n  }\n\n  isDirective(attr) {\n    return attr.indexOf('es-') === 0;\n  }\n\n  isEventDirective(event) {\n    return event.indexOf('on') === 0;\n  }\n\n  isElementNode(node) {\n    return node.nodeType === 1;\n  }\n\n  isRepeatNode(node) {\n    const nodeAttrs = node.attributes;\n    let result = false;\n    if (nodeAttrs) {\n      Array.from(nodeAttrs).forEach(attr => {\n        const attrName = attr.name;\n        if (attrName === 'es-repeat') result = true;\n      });\n    }\n    return result;\n  }\n}\n\nclass Compile {\n  constructor(el, vm) {\n    this.$vm = vm;\n    this.$el = this.isElementNode(el) ? el : document.querySelector(el);\n    if (this.$el) {\n      this.$fragment = this.node2Fragment(this.$el);\n      this.init();\n      this.$el.appendChild(this.$fragment);\n    }\n  }\n\n  init() {\n    this.compileElement(this.$fragment);\n  }\n\n  compileElement(fragment) {\n    const elementCreated = document.createElement('div');\n    elementCreated.innerHTML = this.$vm.declareTemplate;\n    let childNodes = elementCreated.childNodes;\n    Array.from(childNodes).forEach(node => {\n      const text = node.textContent;\n      const reg = /\\{\\{(.*)\\}\\}/g;\n      if (this.isElementNode(node)) {\n        this.compile(node);\n        if (reg.test(text)) this.compileText(node, RegExp.$1);\n      }\n      if (!this.isRepeatNode(node)) {\n        fragment.appendChild(node);\n      }\n    });\n  }\n\n  compile(node) {\n    const nodeAttrs = node.attributes;\n    if (nodeAttrs) {\n      Array.from(nodeAttrs).forEach(attr => {\n        const attrName = attr.name;\n        if (this.isDirective(attrName)) {\n          const dir = attrName.substring(3);\n          const exp = attr.value;\n          if (this.isEventDirective(dir)) {\n            this.eventHandler(node, this.$vm, exp, dir);\n          } else {\n            new CompileUtil(this.$fragment).bind(node, this.$vm, exp, dir);\n          }\n          // node.removeAttribute(attrName);\n        }\n      });\n    }\n  }\n\n  node2Fragment(el) {\n    const fragment = document.createDocumentFragment();\n    let child;\n    while (child === el.firstChild) {\n      fragment.appendChild(child);\n    }\n    return fragment;\n  }\n\n  compileText(node, exp) {\n    new CompileUtil(this.$fragment).text(node, this.$vm, exp);\n  }\n\n  eventHandler(node, vm, exp, event) {\n    const eventType = event.split(':')[1];\n    const fnList = exp.replace('()', '').split('.');\n    let fn = vm;\n    fnList.forEach(f => {\n      if (f === 'this') return;\n      fn = fn[f];\n    });\n    if (eventType && fn) node.addEventListener(eventType, fn.bind(vm), false);\n  }\n\n  isDirective(attr) {\n    return attr.indexOf('es-') === 0;\n  }\n\n  isEventDirective(event) {\n    return event.indexOf('on') === 0;\n  }\n\n  isElementNode(node) {\n    return node.nodeType === 1;\n  }\n\n  isRepeatNode(node) {\n    const nodeAttrs = node.attributes;\n    let result = false;\n    if (nodeAttrs) {\n      Array.from(nodeAttrs).forEach(attr => {\n        const attrName = attr.name;\n        if (attrName === 'es-repeat') result = true;\n      });\n    }\n    return result;\n  }\n\n  // isTextNode(node) {\n  //   return node.nodeType == 3;\n  // }\n}\n\nmodule.exports = Compile;\n","const Lifecycle = require('./Lifecycle');\nconst Compile = require('./Compile');\nconst Watcher = require('./Watcher');\n\nclass Component extends Lifecycle {\n  constructor(declareTemplateName, props) {\n    super();\n    this.declareTemplateName = declareTemplateName;\n    if (props) {\n      this.preProps = props;\n      this.props = {};\n    }\n    this.declareTemplate = '';\n    this.state = {};\n    this.fatherController = {};\n    // this.compile = new Compile(`#component_${this.declareTemplateName}`, this);\n  }\n\n  $initProps(preProps) {\n    if (preProps) {\n      this.preProps = preProps;\n      this.props = {};\n      this.fatherController = window.routerController.declareComponents[this.declareTemplateName].preProps;\n      for (let key in this.fatherController) {\n        if (typeof this.preProps[key] === 'string') this.props[key] = window.routerController.state[this.fatherController[key]];\n        if (this.utils.isFunction(this.preProps[key])) this.props[key] = this.preProps[key];\n      }\n    }\n  }\n\n  $beforeInit() {\n    if (this.preProps) {\n      this.$initProps(this.preProps);\n      this.propsWatcher = new Watcher(this.props, this.$watchState.bind(this), this.$updateProps.bind(this), this.$reRender.bind(this));\n    }\n    this.stateWatcher = new Watcher(this.state, this.$watchState.bind(this), null, this.$reRender.bind(this));\n  }\n\n  $updateProps(key, newVal) {\n    const controllerStateKey = this.preProps[key];\n    window.routerController.state[controllerStateKey] = newVal;\n  }\n\n  $render() {\n    const dom = document.getElementById(`component_${this.declareTemplateName}`);\n    if (dom && dom.hasChildNodes()) {\n      let childs = dom.childNodes;\n      for (let i = childs.length - 1; i >= 0; i--) {\n        dom.removeChild(childs.item(i));\n      }\n    }\n    this.compile = new Compile(`#component_${this.declareTemplateName}`, this);\n    if (this.$hasRender) this.$hasRender();\n  }\n\n  $reRender() {\n    const dom = document.getElementById(`component_${this.declareTemplateName}`);\n    if (dom && dom.hasChildNodes()) {\n      let childs = dom.childNodes;\n      for (let i = childs.length - 1; i >= 0; i--) {\n        dom.removeChild(childs.item(i));\n      }\n    }\n    if (this.$onDestory) this.$onDestory();\n    this.compile = new Compile(`#component_${this.declareTemplateName}`, this);\n    if (this.$hasRender) this.$hasRender();\n  }\n\n  setProps(newProps) {\n    if (!this.preProps) return;\n    if (newProps && this.utils.isFunction(newProps)) {\n      const _newProps = newProps();\n      if (_newProps && _newProps instanceof Object) {\n        for (var key in _newProps) {\n          if (this.props[key] && this.props[key] !== _newProps[key]) this.props[key] = _newProps[key];\n        }\n      }\n    }\n    if (newProps && newProps instanceof Object) {\n      for (let key in newProps) {\n        if (this.props[key] && this.props[key] !== newProps[key]) {\n          this.props[key] = newProps[key];\n        }\n      }\n    }\n  }\n}\n\nmodule.exports = Component;\n","const Lifecycle = require('./Lifecycle');\nconst Watcher = require('./Watcher');\nconst Compile = require('./Compile');\n\nclass Controller extends Lifecycle {\n  constructor() {\n    super();\n    this.declareTemplate = '';\n    this.state = {};\n    this.declareComponents = {};\n  }\n\n  $beforeInit() {\n    this.stateWatcher = new Watcher(this.state, this.$watchState.bind(this), this.$updateProps.bind(this), this.$reRender.bind(this));\n  }\n\n  $updateProps(key, newVal) {\n    for (var componentName in this.declareComponents) {\n      const declareComponent = this.declareComponents[componentName];\n      let propsKey = null;\n      for (let name in declareComponent.preProps) {\n        if (declareComponent.preProps[name] === key) {\n          propsKey = name;\n        }\n      }\n      if (propsKey && newVal !== declareComponent.props[propsKey]) declareComponent.props[propsKey] = newVal;\n    }\n  }\n\n  $mountComponent() {\n    for (let key in this.declareComponents) {\n      if (this.declareComponents[key].$beforeInit) this.declareComponents[key].$beforeInit();\n      if (this.declareComponents[key].$onInit) this.declareComponents[key].$onInit();\n      const domReg = new RegExp(`(\\<)(${key})(\\/>)`, 'g');\n      this.declareTemplate = this.declareTemplate.replace(domReg, (...args) => `<div id=\"component_${key}\"></div>`);\n      if (this.declareComponents[key].$beforeMount) this.declareComponents[key].$beforeMount();\n    }\n  }\n\n  $render() {\n    const dom = document.getElementById('root');\n    if (dom.hasChildNodes()) {\n      let childs = dom.childNodes;\n      for (let i = childs.length - 1; i >= 0; i--) {\n        dom.removeChild(childs.item(i));\n      }\n    }\n    this.$mountComponent();\n    this.compile = new Compile('#root', this);\n    if (this.declareComponents) {\n      for (let key in this.declareComponents) {\n        if (this.declareComponents[key].$render) this.declareComponents[key].$render();\n        if (this.declareComponents[key].$afterMount) this.declareComponents[key].$afterMount();\n      }\n    }\n    if (this.$hasRender) this.$hasRender();\n  }\n\n  $reRender() {\n    const dom = document.getElementById('root');\n    if (dom.hasChildNodes()) {\n      let childs = dom.childNodes;\n      for (let i = childs.length - 1; i >= 0; i--) {\n        dom.removeChild(childs.item(i));\n      }\n      if (this.$onDestory) this.$onDestory();\n    }\n    this.$mountComponent();\n    this.compile = new Compile('#root', this);\n    if (this.declareComponents) {\n      for (let key in this.declareComponents) {\n        if (this.declareComponents[key].$reRender) this.declareComponents[key].$reRender();\n        if (this.declareComponents[key].$afterMount) this.declareComponents[key].$afterMount();\n      }\n    }\n    if (this.$hasRender) this.$hasRender();\n  }\n}\n\nmodule.exports = Controller;\n","const Utils = require('./Utils');\n\nclass Router {\n  constructor() {\n    this.routes = {};\n    this.currentUrl = '';\n    this.lastRoute = null;\n    this.rootDom = null;\n    this.utils = new Utils();\n    window.addEventListener('load', this.refresh.bind(this), false);\n    window.addEventListener('hashchange', this.refresh.bind(this), false);\n  }\n\n  $routeChange(lastRoute, nextRoute) {}\n\n  init(arr) {\n    if (arr && arr instanceof Array) {\n      arr.forEach(route => {\n        if (route.path && route.controller && this.utils.isFunction(route.controller)) {\n          this.route(route.path, route.controller);\n        } else {\n          console.error('need path or controller');\n          return false;\n        }\n      });\n      const rootDom = document.querySelector('#root');\n      this.rootDom = rootDom || null;\n    } else {\n      console.error('no routes exit');\n    }\n  }\n\n  route(path, controller) {\n    this.routes[path] = controller || function () {};\n  }\n\n  refresh() {\n    this.currentUrl = location.hash.slice(1) || '/';\n    if (this.routes[this.currentUrl]) {\n      if (window.routerController) {\n        if (window.routerController.$onDestory) window.routerController.$onDestory();\n        delete window.routerController;\n      }\n      const controller = new this.routes[this.currentUrl]();\n      window.routerController = controller;\n      if (controller.$beforeInit) controller.$beforeInit();\n      if (controller.$onInit) controller.$onInit();\n      this.renderController(controller).then(() => {\n        this.$routeChange(this.lastRoute, this.currentUrl);\n        this.lastRoute = this.currentUrl;\n      }).catch(() => {\n        console.error('route change failed');\n      });\n    }\n  }\n\n  renderController(controller) {\n    const template = controller.declareTemplate;\n    if (template && typeof template === 'string' && this.rootDom) {\n      if (controller.$beforeMount) controller.$beforeMount();\n      this.replaceDom(controller).then(() => {\n        if (controller.$afterMount) controller.$afterMount();\n      });\n      return Promise.resolve();\n    } else {\n      console.error('renderController failed: template or rootDom is not exit');\n      return Promise.reject();\n    }\n  }\n\n  replaceDom(controller) {\n    if (controller.$render) controller.$render();\n    return Promise.resolve();\n  }\n}\n\nmodule.exports = Router;\n","const Utils = require('./Utils');\nconst Lifecycle = require('./Lifecycle');\nconst Watcher = require('./Watcher');\nconst Compile = require('./Compile');\nconst Component = require('./Component');\nconst Controller = require('./Controller');\nconst Router = require('./Router');\n\nmodule.exports = {\n  Utils,\n  Lifecycle,\n  Watcher,\n  Compile,\n  Component,\n  Controller,\n  Router,\n};\n"]}